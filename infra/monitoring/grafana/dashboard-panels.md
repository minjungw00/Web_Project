# Grafana 대시보드 패널 매핑

## blackbox-exporter-http-prober.json

| 패널                       | PromQL / 쿼리                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 의미                                                                                             | 활용                                                                       |
| -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------- |
| HTTP Probe Overview        | `probe_success{job=~"$job", instance=~"$instance"}`<br>`probe_http_ssl{job=~"$job", instance=~"$instance"} > 0`<br>`(probe_ssl_earliest_cert_expiry{job=~"$job", instance=~"$instance"} - time()) / 3600 / 24`<br>`probe_http_status_code{job=~"$job", instance=~"$instance"} > 0`<br>`avg_over_time(probe_duration_seconds{job=~"$job", instance=~"$instance"}[1m])`<br>`probe_tls_version_info{job=~"$job", instance=~"$instance"}`<br>`avg_over_time(probe_dns_lookup_time_seconds{job=~"$job", instance=~"$instance"}[1m])` | HTTP 프로브의 성공 여부, 상태코드, TLS/인증서 만료, DNS/연결/전송 단계 지연을 한눈에 요약합니다. | 가용성 저하나 오류 코드가 감지되면 즉시 알람을 확인하고 원인을 추적합니다. |
| HTTP Probe Duration        | `sum(probe_http_duration_seconds{job=~"$job", instance=~"$instance"}) by (instance)`                                                                                                                                                                                                                                                                                                                                                                                                                                            | 대상 엔드포인트에 대한 HTTP 프로브 전체 소요 시간을 나타냅니다.                                  | 가용성 저하나 오류 코드가 감지되면 즉시 알람을 확인하고 원인을 추적합니다. |
| HTTP Probe Phases Duration | `probe_http_duration_seconds{job=~"$job", instance=~"$instance"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                               | DNS 조회, 연결, TLS, 요청/응답 등 HTTP 프로브 단계별 소요 시간을 보여줍니다.                     | 가용성 저하나 오류 코드가 감지되면 즉시 알람을 확인하고 원인을 추적합니다. |

## cadvisor-dashboard.json

| 패널                                                                                              | PromQL / 쿼리                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 의미                                                                                                    | 활용                                                                                                                      |
| ------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| container_start_time                                                                              | `max by (name) (container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}) * 1000`                                                                                                                                                                                                                                                                                                                                                                                                                                               | 컨테이너 시작 시각(Unix ms)입니다. 재기동/배포 시점을 파악해 장애·롤링 여부를 확인합니다.               | 예기치 않은 재시작이 보이면 이벤트/로그에서 OOM/CrashLoopBackOff 등 원인을 확인합니다.                                    |
| container_last_seen                                                                               | `max by (name) (container_last_seen{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}) * 1000`                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 마지막 메트릭 수집 시각(Unix ms)입니다. 수집 지연/단절 여부를 감지합니다.                               | 지연/단절 시 cAdvisor 타겟 상태, 네트워크, 권한(cap) 문제를 점검합니다.                                                   |
| container_tasks_state                                                                             | `sum by (state)(container_tasks_state{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 태스크 상태 분포(running/sleeping/stopped/zombie)를 보여줍니다.                                         | stopped/zombie 증가 시 프로세스 종료/시그널/헬스체크 및 로그를 확인합니다.                                                |
| container_oom_events_total                                                                        | `max by (name) (rate(container_oom_events_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                                | 컨테이너에서 발생한 메모리 부족(OOM) 이벤트 수를 나타냅니다.                                            | 값이 0이 아니거나 급증하면 장애 원인을 조사하고 알람 임계치를 조정합니다.                                                 |
| container_scrape_error                                                                            | `container_scrape_error`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 컨테이너 메트릭 수집(cAdvisor) 과정의 오류 발생 여부를 표시합니다.                                      | 값이 0이 아니거나 급증하면 장애 원인을 조사하고 알람 임계치를 조정합니다.                                                 |
| container_cpu_system                                                                              | `max by (name) (rate(container_cpu_system_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                        | 커널 모드 CPU 사용량(코어초/초)입니다.                                                                  | 높을 경우 시스템 콜 과다/IO 경합/컨텍스트 스위치 증가를 의심하고 프로파일링을 검토합니다.                                 |
| container_cpu_user                                                                                | `max by (name) (rate(container_cpu_user_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                          | 사용자 모드 CPU 사용량(코어초/초)입니다.                                                                | 애플리케이션 CPU 바운드 여부를 판단하고 최적화/스케일아웃을 검토합니다.                                                   |
| container_cpu_usage                                                                               | `max by (name) (rate(container_cpu_usage_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                         | 총 CPU 사용량(유저+시스템, 코어초/초)입니다.                                                            | request/limit 대비 사용률과 CFS 스로틀링 지표를 함께 보고 스케일/튜닝을 판단합니다.                                       |
| container_cpu check                                                                               | `max by (name) (rate(container_cpu_usage_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval])) - on (name) (max by (name) (rate(container_cpu_user_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval])) + on (name) max by (name) (rate(container_cpu_system_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval])))` | 총사용과 user+system의 차이를 산출합니다. 차이가 크면 steal/계정외 사용 등 이상 가능성이 있습니다.      | 호스트 과부하·가상화 steal·cgroup 계정 누락 여부를 점검합니다.                                                            |
| container_cpu_cfs_periods_total                                                                   | `max by (name) (rate(container_cpu_cfs_periods_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                           | CFS 주기 수(초당)입니다. CPU 쿼터 평가의 기준이 되는 샘플링 주기입니다.                                 | 스로틀링 지표와 함께 쿼터 한계 도달 여부를 판단합니다.                                                                    |
| container_cpu_cfs_throttled_periods_total                                                         | `max by (name) (rate(container_cpu_cfs_throttled_periods_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                 | CFS에서 스로틀된 주기 수(초당)입니다. CPU 쿼터에 막힌 빈도를 의미합니다.                                | 지속적으로 높으면 CPU limit 상향, 배치 스케줄 조정, 워크로드 분산을 검토합니다.                                           |
| container_cpu_cfs_throttled_seconds_total                                                         | `max by (name) (rate(container_cpu_cfs_throttled_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                 | CFS 스로틀 시간(초/초)입니다. 총 차단 시간을 의미하며 쿼터 부족 정도를 보여줍니다.                      | 지속적으로 높으면 CPU limit 상향, 배치 스케줄 조정, 워크로드 분산을 검토합니다.                                           |
| container_cpu_load_average_10s                                                                    | `max by (name) (container_cpu_load_average_10s{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 10초 이동 평균 Load 입니다. 1.0은 단일 vCPU 포화를 의미해 vCPU 수 대비 과부하 판단에 활용합니다.        | 지속적으로 vCPU 수를 초과하면 스케일링/최적화를 검토합니다.                                                               |
| container_memory_failcnt                                                                          | `max by (name) (rate(container_memory_failcnt{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                                  | 메모리 할당 실패 누계(rate)입니다. cgroup 메모리 한도에 걸릴 때 증가합니다.                             | 증가 시 메모리 limit 상향 또는 메모리 사용 최적화/누수 점검을 진행합니다.                                                 |
| container_memory_failures_total                                                                   | `max by (name) (rate(container_memory_failures_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                           | 메모리 실패(하드/소프트) 누계(rate)입니다. OOM 전조 지표로 활용합니다.                                  | 증가 시 메모리 limit/requests 조정과 워크로드 패턴·누수 여부를 점검합니다.                                                |
| container_memory_max_usage_bytes                                                                  | `max by (name) (container_memory_max_usage_bytes{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 관찰 구간 동안 기록된 메모리 사용량의 최대치(피크)입니다.                                               | 피크가 limit에 근접/도달하면 과거 메모리 압박이 있었던 것이므로 누수/버퍼 튜닝 및 limit 재평가가 필요합니다.              |
| container_memory_usage_bytes                                                                      | `max by (name) (container_memory_usage_bytes{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 총 메모리 사용량입니다(working set + 캐시 등). 캐시 포함으로 일시적 상승이 있을 수 있습니다.            | usage 대비 working_set을 함께 보아 캐시 증가인지 실제 사용 증가인지 구분하고, 임계치 근접 시 원인 파악/튜닝을 진행합니다. |
| container_memory_working_set_bytes                                                                | `max by (name) (container_memory_working_set_bytes{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                | 즉시 회수 불가능한 실사용 메모리(활성 working set)입니다. 압박 지표로 가장 유용합니다.                  | working_set이 limit에 근접하면 OOM 위험이 커집니다. 메모리 최적화, limit 상향, 수평 확장을 검토합니다.                    |
| container_memory_rss                                                                              | `max by (name) (container_memory_rss{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 프로세스 RSS(주로 익명 메모리, 일부 파일-백드 포함)로 캐시를 제외한 상주 메모리 규모를 가늠합니다.      | RSS가 지속 증가하면 누수 가능성을 의심하고 힙/프로파일링을 통해 원인을 분석합니다.                                        |
| container_memory_mapped_file                                                                      | `max by (name) (container_memory_mapped_file{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                      | mmap된 파일 크기입니다(파일 매핑).                                                                      | 수치 자체는 정상일 수 있으나 급증 시 파일 핸들/매핑 패턴 변화를 점검합니다.                                               |
| container_memory_cache                                                                            | `max by (name) (container_memory_cache{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 페이지 캐시 크기입니다. 디스크 I/O 후 자연스럽게 증가할 수 있습니다.                                    | cache 증가로 usage가 높아도 working_set이 낮으면 심각하지 않습니다. 장기적으로 limit 압박을 유발하면 조정 검토.           |
| container_memory_swap                                                                             | `max by (name) (container_memory_swap{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 컨테이너가 사용하는 스왑(bytes)입니다. 스왑 사용은 지연을 유발합니다.                                   | swap>0이면 swappiness/스왑 설정 점검, 메모리 최적화 또는 limit 상향을 고려합니다.                                         |
| container_spec_memory_limit                                                                       | `max by (name) (container_spec_memory_limit_bytes{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                 | cgroup 하드 메모리 한도입니다(OOM 기준).                                                                | working_set/usage 대비 여유를 확보하고 워크로드 특성에 맞게 한도를 설정합니다.                                            |
| container_spec_memory_reservation_limit_bytes                                                     | `max by (name) (container_spec_memory_reservation_limit_bytes{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                     | 메모리 reservation(소프트 한도)입니다. 커널이 이 수준을 유지하려 시도합니다.                            | reservation과 limit 간 간격을 적절히 두고 스케줄링/밀집도/안정성을 균형 있게 조정합니다.                                  |
| container_spec_memory_swap_limit_bytes                                                            | `max by (name) (container_spec_memory_swap_limit_bytes{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                            | 컨테이너에 허용된 스왑 한도입니다.                                                                      | swap 한도를 낮게 설정하면 OOM 가능성이 커지므로 애플리케이션 특성에 맞게 신중히 설정합니다.                               |
| container_network_receive_bytes_total, container_network_transmit_bytes_total                     | `max by (name) (rate(container_network_receive_bytes_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`- max by (name) (rate(container_network_transmit_bytes_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                          | 컨테이너 수신/송신 바이트 레이트(Throughput)입니다. 단위 시간 대역폭 사용량을 보여줍니다.               | NIC/호스트 용량 대비 포화 여부를 판단하고, 스파이크 시 상위 요청/서비스를 상관 분석합니다.                                |
| container_network_receive_packets_total, container_network_transmit_packets_total                 | `max by (name) (rate(container_network_receive_packets_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`- max by (name) (rate(container_network_transmit_packets_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                      | 컨테이너 수신/송신 패킷 레이트(PPS)입니다. 작은 패킷이 많을수록 PPS가 높고 CPU 부담이 커질 수 있습니다. | 바이트 레이트와 함께 보아 소형 패킷 폭주 여부를 파악하고 커널 큐/IRQ 튜닝을 검토합니다.                                   |
| container_network_receive_errors_total, container_network_transmit_errors_total                   | `max by (name) (rate(container_network_receive_errors_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`- max by (name) (rate(container_network_transmit_errors_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                        | 컨테이너 NIC/커널 계층에서의 오류 레이트입니다. 정상적으로는 0에 가까워야 합니다.                       | 증가 시 MTU/체크섬/드라이버/물리 링크 문제를 점검하고, 호스트 수준 오류와 대조합니다.                                     |
| container_network_receive_packets_dropped_total, container_network_transmit_packets_dropped_total | `max by (name) (rate(container_network_receive_packets_dropped_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`- max by (name) (rate(container_network_transmit_packets_dropped_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                      | 드롭된 패킷 레이트입니다. 큐 포화/필터링/자원 부족으로 발생할 수 있습니다.                              | 증가 시 커널 큐 길이, tc/qdisc, 방화벽 규칙, 리소스 제한을 점검합니다.                                                    |
| container_blkio_device_usage_total                                                                | `max by (name) (rate(container_blkio_device_usage_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                        | blkio cgroup의 디바이스별 I/O 사용량(바이트/초, op유형)에 대한 레이트입니다.                            | sustained 고값이면 디스크 스루풋 한계 가능성. fs io_time/weighted와 함께 포화 여부를 판단합니다.                          |
| container_fs_inodes_free, container_fs_inodes_total                                               | `max by (name) (container_fs_inodes_free{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`<br>`max by (name) (container_fs_inodes_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                      | 파일시스템 inode 여유/총량입니다. inode 고갈 시 파일 생성 실패가 발생합니다.                            | inode 여유율이 낮아지면 로그/임시파일 정리, 파티션 재구성 또는 스토리지 확장을 검토합니다.                                |
| container_fs_limit                                                                                | `max by (name) (container_fs_limit_bytes{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 파일시스템 용량(바이트) 상한입니다.                                                                     | usage와 함께 퍼센트를 산출하여 임계치(예: 80/90%) 초과 시 알람/증설/정리를 진행합니다.                                    |
| container_fs_io_current                                                                           | `max by (name) (container_fs_io_current{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 현재 진행 중인 I/O 요청 수입니다. 큐잉 여부를 직관적으로 보여줍니다.                                    | 지속적으로 0보다 크면 디스크 큐 포화/지연 가능성을 의심하고 io_time/latency 지표를 함께 봅니다.                           |
| container_fs_usage                                                                                | `max by (name) (rate(container_fs_usage_bytes{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                                  | 파일시스템 사용 바이트의 증가율입니다(성장 속도).                                                       | 급격한 증가 시 원인(로그 폭주/스냅샷/캐시)을 찾아 정리 정책/로테이션/용량 증설을 검토합니다.                              |
| container_fs_io                                                                                   | `max by (name) (rate(container_fs_io_time_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`max by (name) (rate(container_fs_io_time_weighted_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                          | I/O에 소요된 시간과 가중치 적용 시간(rate)입니다. weighted가 높으면 동시 I/O로 인한 체감 지연이 큽니다. | 값이 높고 io_current도 높으면 포화 가능성. IOPS/latency 지표와 함께 원인을 진단합니다.                                    |
| container_fs_read_seconds, container_fs_write_seconds                                             | `max by (name) (rate(container_fs_read_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`max by (name) (rate(container_fs_write_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                        | 읽기/쓰기 작업에 소비된 시간의 증가율입니다. 단독으로는 지연 의미가 제한적입니다.                       | reads_total/writes_total 레이트로 나누어 평균 지연(초/IO)을 산출해 모니터링하는 것을 권장합니다.                          |
| container_fs_sector_reads_total, container_fs_sector_writes_total                                 | `max by (name) (rate(container_fs_sector_reads_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`- max by (name) (rate(container_fs_sector_writes_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                      | 섹터 단위의 읽기/쓰기 레이트입니다. 디바이스 섹터 크기에 따라 바이트로 환산이 필요합니다.               | 바이트 레이트와 비교해 I/O 패턴을 파악하고, 비정상 급증 시 원인 워크로드를 식별합니다.                                    |
| container_fs_reads_total, container_fs_writes_total                                               | `max by (name) (rate(container_fs_reads_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`- max by (name) (rate(container_fs_writes_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                                    | 읽기/쓰기 작업 수(초당)입니다(IOPS).                                                                    | IOPS가 높고 io_time/latency도 높으면 스토리지 병목 가능성이 큽니다.                                                       |
| container_fs_reads_merged_total, container_fs_writes_merged_total                                 | `max by (name) (rate(container_fs_reads_merged_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`- max by (name) (rate(container_fs_writes_merged_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                                                                                                                                                                                                                      | 병합된 I/O 작업 수(초당)입니다. 커널이 인접 I/O를 합쳐 효율을 높였음을 의미합니다.                      | merged/total 비율을 참고해 I/O 패턴 변화를 감지하고, 급감/급증 시 접근 패턴 변경 여부를 점검합니다.                       |
| docker compose project                                                                            | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Docker Compose 프로젝트명 라벨 등 메타데이터를 표시합니다.                                              | 대시보드 필터링과 그룹화를 위해 참조합니다.                                                                               |
| docker compose container number                                                                   | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Compose에서 정의된 컨테이너 수/인스턴스 식별에 활용되는 메타 정보입니다.                                | 배포/스케일아웃 변화를 식별하는 용도로 참고합니다.                                                                        |
| docker compose oneoff                                                                             | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 일회성(one-off) 작업 여부를 나타내는 메타 정보입니다.                                                   | 배치/잡 컨테이너 식별에 활용합니다.                                                                                       |
| docker compose version                                                                            | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Compose 버전 라벨 등 구성 버전 메타 정보를 표시합니다.                                                  | 구성 차이에 따른 동작 이슈를 구분하는 데 참고합니다.                                                                      |
| docker compose project config files                                                               | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Compose 구성 파일 경로/해시 등 메타 정보를 표시합니다.                                                  | 구성 변경 추적과 문제 재현에 참고합니다.                                                                                  |
| container maintainer                                                                              | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 컨테이너/이미지 메인터이너 라벨입니다.                                                                  | 담당자/소유권 파악에 사용합니다.                                                                                          |
| docker compose project working dir                                                                | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Compose 작업 디렉터리 경로 라벨입니다.                                                                  | 다중 프로젝트/환경 구분에 참고합니다.                                                                                     |
| docker compose service                                                                            | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Compose 서비스명 라벨입니다.                                                                            | 서비스별 필터링/그룹화 용도로 사용합니다.                                                                                 |
| docker compose config hash                                                                        | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Compose 설정 해시 라벨입니다.                                                                           | 설정 변경 여부 추적에 사용합니다.                                                                                         |
| image                                                                                             | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 컨테이너 이미지 태그/다이제스트 라벨입니다.                                                             | 릴리스 식별/롤백 판단에 참고합니다.                                                                                       |
| docker compose image                                                                              | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Compose 서비스 이미지 라벨입니다.                                                                       | 서비스 버전/이미지 변경과 이슈 상관관계 파악에 사용합니다.                                                                |
| build version                                                                                     | `container_start_time_seconds{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 빌드/릴리스 버전 라벨입니다.                                                                            | 특정 빌드에서만 발생하는 문제를 신속히 식별합니다.                                                                        |
| container_cpu                                                                                     | `max by (name) (rate(container_cpu_system_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`max by (name) (rate(container_cpu_user_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`<br>`max by (name) (rate(container_cpu_usage_seconds_total{instance=~"$host_instance", name=~"$container_name", container_label_com_docker_compose_project=~"$compose_project"}[$__rate_interval]))`                 | 컨테이너 CPU 사용(사용자/시스템/총합), CFS 주기·스로틀링 등 CPU 관련 지표를 보여줍니다.                 | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                    |

## loki-stack-monitoring.json

| 패널                                                        | PromQL / 쿼리                                                                                                                                                                                                                                         | 의미                                                                              | 활용                                                                                                                                                                                                            |
| ----------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Summary of alerts status                                    | -                                                                                                                                                                                                                                                     | 경보 상태를 요약해 현재 알림 상황을 파악합니다.                                   | 경보 상태 변화를 체크하고 대응 플레이북에 따라 후속 조치를 수행합니다.                                                                                                                                          |
| Problems in the Loki Stack                                  | -                                                                                                                                                                                                                                                     | 로그 파이프라인의 이상 징후를 요약합니다.                                         | 로그 적재 지연이나 누락을 감시하고 라벨 카드inality 문제를 조치합니다.                                                                                                                                          |
| Number of error/warning messages logged by Loki itself      | `sum(rate(log_messages_total{app="loki",level=~"error&#124;warn"}[1m])) by (level)`<br>`log_messages_total`                                                                                                                                           | Loki 자체 경고/오류 로그 발생률입니다(ingester/distributor/querier/compactor 등). | 증가 시 해당 Pod 로그에서 스택 트레이스/오류 코드를 확인하고, 문제 컴포넌트별 조치(레플리카 증설, 리소스 상향, 스토리지/네트워크 점검, 롤백)를 수행합니다. 실패 지표(append 실패, gRPC 에러)와 교차 확인하세요. |
| Error/warning messages logged by Loki itself                | `{app="loki"} &#124; logfmt &#124; level="warn" or level="error"`                                                                                                                                                                                     | Loki Pod의 경고/오류 로그 라인 샘플입니다.                                        | 최근 오류 유형을 빠르게 파악해 원인(스토리지 지연, 링 불안정, 쿼리 타임아웃)을 분류하고, compactor 스케줄·retention·replication·ingester 링 상태를 점검합니다.                                                  |
| Error/warning messages logged by Promtail                   | `sum(rate(log_messages_total{app_kubernetes_io_name="promtail",level=~"error&#124;warn"}[1m])) by (level)`                                                                                                                                            | Promtail 경고/오류 로그 발생률입니다(스크랩/파싱/전송 파이프라인).                | 증가 시 파이프라인 스테이지(grok/relabel), 권한/파일 접근, DNS/네트워크, backoff/재시도 설정을 점검하고, batch_size/timeout 조정 및 타겟 상태(promtail targets)를 확인합니다.                                   |
| Error/warning messages logged by Promtail                   | `{app="promtail"} &#124; logfmt &#124; level="warn" or level="error"`                                                                                                                                                                                 | Promtail 경고/오류 로그 라인 샘플입니다.                                          | 에러 타입(권한, 파서 실패, 전송 실패)을 즉시 분류하고, positions 파일/파일 핸들/인코딩/멀티라인 설정과 네트워크·Loki distributor 연결 상태를 점검합니다.                                                        |
| Loki (distributor) - failed batch appends sent to ingesters | `rate(loki_distributor_ingester_append_failures_total[1m])*60`                                                                                                                                                                                        | distributor가 ingester로 배치 append에 실패한 건수/분입니다.                      | 급증 시 ingester 링/헬스, 네트워크, 스토리지 쓰기 지연을 점검하고 레플리카 증설·리밸런싱을 수행합니다. max_chunk_age·replication_factor·ingester_limits를 재평가하세요.                                         |
| Promtail - dropped log entries                              | `rate(promtail_dropped_entries_total[1m])*60`                                                                                                                                                                                                         | Promtail에서 전송 실패로 드롭된 로그 건수/분입니다.                               | 원인별 조치: backpressure(배치/재시도/타임아웃 상향), 파서 실패(파이프라인 수정), 권한/파일 소실(권한/경로/positions 복구), 네트워크 문제(DNS/연결 재시도) 순으로 점검·복구합니다.                              |
| Logging activity                                            | -                                                                                                                                                                                                                                                     | 수집→전송→인제스트까지 로그 파이프라인의 활동·지연·드롭을 종합 요약합니다.        | 지연/누락 징후 시 promtail targets/positions·distributor/ingester 상태를 순서대로 확인하고, 샤딩/레플리카/배치 파라미터를 조정합니다. 라벨 카디널리티도 함께 점검합니다.                                        |
| Number of Streams in Loki                                   | `loki_ingester_memory_streams`                                                                                                                                                                                                                        | 테넌트/라벨 조합으로 생성된 활성 스트림 수입니다(메모리/GC에 영향).               | 스트림 수 급증 시 라벨 카디널리티를 낮추고(로그 라벨링 규칙 조정), ingester 메모리 한도·레플리카를 상향하거나 retention/compaction 정책을 조정합니다.                                                           |
| Loki (distributor) - log entries received per second        | `rate(loki_distributor_lines_received_total[1m])`                                                                                                                                                                                                     | distributor가 수신한 로그 라인 수/초입니다. 기대 트래픽 대비 변동을 확인합니다.   | 급락 시 promtail 타겟/네임스페이스 장애 가능성, 급증 시 라벨 카디널리티·샤딩 필요성 검토. promtail dropped/오류 로그와 교차 확인하여 병목 지점을 특정합니다.                                                    |
| Bytes received in ingester per second                       | `sum(rate(loki_distributor_bytes_received_total[1m]))`                                                                                                                                                                                                | 초당 수신 바이트입니다. 라인 수와 함께 페이로드 크기 변화를 추적합니다.           | 바이트↑/라인↓면 로그 크기 증가(스택트레이스/멀티라인) 가능성. 인코딩/멀티라인 파서/배치 크기 조정을 검토하고, 저장소 쓰기 지연과 함께 확인합니다.                                                               |
| Memory usage                                                | -                                                                                                                                                                                                                                                     | Loki/Promtail 워킹셋/캐시 메모리 사용입니다. 한도 대비 추이를 봅니다.             | ingester/chunk 캐시·압축 설정, chunk_target_size, inactive flush 정책을 조정하고, 카디널리티 완화/레플리카 증설로 메모리 압박을 해소합니다.                                                                     |
| Loki memory usage (% of Kubernetes memory limit)            | `100 * max by(pod,container) (container_memory_working_set_bytes{container!="",container!="POD",pod=~"loki.*"}) / on (pod,container) group_left kube_pod_container_resource_limits_memory_bytes{pod=~"loki.*"}`                                       | Loki 워킹셋의 한도 대비 비율입니다.                                               | 80%↑ 지속 시 ingester 수/메모리 상향, 스트림 카디널리티 절감, retention/compaction·chunk 설정을 조정합니다.                                                                                                     |
| Loki memory usage vs Kubernetes limit and request           | `container_memory_working_set_bytes{container!="",container!="POD",pod=~"loki.*"}`<br>`min(kube_pod_container_resource_limits_memory_bytes{pod=~"loki.*"})`<br>`min(kube_pod_container_resource_requests_memory_bytes{pod=~"loki.*"})`                | 워킹셋 vs limit/request 비교입니다. 요청/한도 설정 적정성을 점검합니다.           | request<실사용이면 QoS 저하/eviction 위험. limit에 근접 시 OOM 위험 대응(튜닝·스케일링)과 파이프라인 카디널리티 완화를 병행합니다.                                                                              |
| Promtail memory usage (% of Kubernetes memory limit)        | `100* max by(pod,container) (container_memory_working_set_bytes{container!="",container!="POD",pod=~"promtail.*"}) / on (pod,container) (kube_pod_container_resource_limits_memory_bytes{pod=~"promtail.*"})`                                         | Promtail 워킹셋의 한도 대비 비율입니다.                                           | 파일 핸들/멀티라인 버퍼/파이프라인 사용 증가가 메모리 압박을 유발할 수 있습니다. 배치/버퍼/파이프라인 간소화와 리소스 상향을 병행합니다.                                                                        |
| Promtail memory usage vs Kubernetes limit and request       | `container_memory_working_set_bytes{container!="",container!="POD",pod=~"promtail.*"}`<br>`min(kube_pod_container_resource_limits_memory_bytes{pod=~"promtail.*"})`<br>`min(kube_pod_container_resource_requests_memory_bytes{pod=~"promtail.*"})`    | 워킹셋 vs limit/request 비교입니다.                                               | request/limit 재설정과 함께, 파일 타겟 수·파이프라인 복잡도를 줄여 메모리 피크를 억제합니다.                                                                                                                    |
| CPU Usage                                                   | -                                                                                                                                                                                                                                                     | Loki/Promtail의 CPU 사용량과 한도 대비 비율을 보여줍니다.                         | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                                                                                                          |
| Loki CPU usage (% of Kubernetes CPU limit)                  | `100* rate(container_cpu_usage_seconds_total{container!="POD",container!="",pod=~"loki.*"}[1m]) / on (pod,container) kube_pod_container_resource_limits_cpu_cores{container="loki"}`                                                                  | Loki/Promtail의 CPU 사용량과 한도 대비 비율을 보여줍니다.                         | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                                                                                                          |
| Loki CPU usage vs Kubernetes limit and request              | `rate(container_cpu_usage_seconds_total{container!="",container!="POD",pod=~"loki.*"}[1m])`<br>`min(kube_pod_container_resource_limits_cpu_cores{pod=~"loki.*"})`<br>`min(kube_pod_container_resource_requests_cpu_cores{pod=~"loki.*"})`             | Loki/Promtail의 CPU 사용량과 한도 대비 비율을 보여줍니다.                         | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                                                                                                          |
| Promtail CPU usage (% of Kubernetes limit)                  | `100 * rate(container_cpu_usage_seconds_total{container!="",container!="POD",pod=~"promtail.*"}[1m]) / on (pod,container) kube_pod_container_resource_limits_cpu_cores{pod=~"promtail.*"}`                                                            | Loki/Promtail의 CPU 사용량과 한도 대비 비율을 보여줍니다.                         | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                                                                                                          |
| Promtail CPU usage vs Kubernetes limit and request          | `rate(container_cpu_usage_seconds_total{container!="",container!="POD",pod=~"promtail.*"}[1m])`<br>`min(kube_pod_container_resource_limits_cpu_cores{pod=~"promtail.*"})`<br>`min(kube_pod_container_resource_requests_cpu_cores{pod=~"promtail.*"})` | Loki/Promtail의 CPU 사용량과 한도 대비 비율을 보여줍니다.                         | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                                                                                                          |

## mysql-overview.json

| 패널                           | PromQL / 쿼리                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 의미                                                                                                                                                                                  | 활용                                                                                                                                                                                              |
| ------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| (untitled)                     | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | MySQL 성능/용량/상태(연결, 쿼리, 메모리, I/O) 개요 타일입니다.                                                                                                                        | 이상 타일을 클릭해 관련 섹션(Connections/Locks/Temp/Sorts/I/O)로 드릴다운하고, 원인 쿼리/설정 값을 바로 확인·조치합니다.                                                                          |
| MySQL Uptime                   | `mysql_global_status_uptime{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | MySQL 서버의 연속 가동 시간을 나타냅니다.                                                                                                                                             | 재시작 또는 수집 중단 징후를 빠르게 파악하고 가용성 이슈를 확인합니다.                                                                                                                            |
| Current QPS                    | `rate(mysql_global_status_queries{instance="$host"}[$interval]) or irate(mysql_global_status_queries{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 초당 쿼리 처리량(QPS)을 나타냅니다.                                                                                                                                                   | 급증/급감 시 Top Command/Handlers, Threads Running/Locks, Slow Queries 패널과 교차 확인하고, 필요 시 캐시·읽기 레플리카·배치 스케줄을 조정합니다.                                                 |
| InnoDB Buffer Pool Size        | `mysql_global_variables_innodb_buffer_pool_size{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | InnoDB 버퍼풀 총 크기입니다.                                                                                                                                                          | 전용 DB 서버는 RAM의 60~75% 수준을 목표로 설정합니다. 디스크 읽기↑/히트율↓면 확장, 스왑/메모리 압박 시 축소·워크로드 최적화를 검토합니다.                                                         |
| Buffer Pool Size of Total RAM  | `(mysql_global_variables_innodb_buffer_pool_size{instance="$host"} * 100) / scalar(node_memory_MemTotal_bytes{instance="$node_instance"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | InnoDB 버퍼풀의 RAM 대비 비율입니다.                                                                                                                                                  | 비율이 낮고 디스크 읽기↑면 확장, 비율이 높고 스왑/압박 발생 시 축소 또는 다른 캐시(쿼리/페이지) 정책을 조정합니다.                                                                                |
| Connections                    | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 동시 연결/최대 사용/허용 연결 현황입니다.                                                                                                                                             | max_used가 max_connections에 근접하면 커넥션 풀 재사용, wait_timeout/백로그/ulimit 조정 및 max_connections 상향을 검토합니다.                                                                     |
| MySQL Connections              | `max(max_over_time(mysql_global_status_threads_connected{instance="$host"}[$interval]) or mysql_global_status_threads_connected{instance="$host"} )`<br>`mysql_global_status_max_used_connections{instance="$host"}`<br>`mysql_global_variables_max_connections{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 동시 연결/최대 사용/허용 연결 현황입니다.                                                                                                                                             | threads_connected가 limit에 근접하면 풀 크기/keepalive/커넥션 누수 점검, max_connections/innodb_thread_concurrency/스레드풀 플러그인 적용을 검토합니다.                                           |
| MySQL Client Thread Activity   | `max_over_time(mysql_global_status_threads_connected{instance="$host"}[$interval]) or max_over_time(mysql_global_status_threads_connected{instance="$host"}[5m])`<br>`max_over_time(mysql_global_status_threads_running{instance="$host"}[$interval]) or max_over_time(mysql_global_status_threads_running{instance="$host"}[5m])`<br>`avg_over_time(mysql_global_status_threads_running{instance="$host"}[$interval]) or avg_over_time(mysql_global_status_threads_running{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 연결 최대치와 실행 스레드의 최대/평균으로 병렬 실행 압력과 스파이크를 파악합니다. threads_running 급증은 락 경합·슬로우쿼리·I/O 병목 가능성을 시사합니다.                             | threads_running 급등 시 Processlist/슬로우쿼리/테이블 락 패널을 교차 확인하고, 커넥션·스레드 풀 및 쿼리 최적화를 검토합니다.                                                                      |
| Table Locks                    | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 테이블 락 즉시/대기 추이로 경합을 파악합니다.                                                                                                                                         | waited 증가 시 performance_schema/INNODB STATUS로 가해자 쿼리를 식별하고 인덱스 추가·쿼리 재작성·트랜잭션 범위 축소를 적용합니다.                                                                 |
| MySQL Questions                | `rate(mysql_global_status_questions{instance="$host"}[$interval]) or irate(mysql_global_status_questions{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 클라이언트가 수행한 SQL 문(statement) 전체에서 계산된 초당 처리량(QPS)입니다(SELECT만이 아니라 모든 COM\_\* 포함). 급증은 배치/폭주 가능성을 시사합니다.                              | QPS 급증/급감 시 상위 명령/핸들러·슬로우쿼리·락 패널을 교차 확인해 원인을 좁힙니다.                                                                                                               |
| MySQL Thread Cache             | `mysql_global_variables_thread_cache_size{instance="$host"}`<br>`mysql_global_status_threads_cached{instance="$host"}`<br>`rate(mysql_global_status_threads_created{instance="$host"}[$interval]) or irate(mysql_global_status_threads_created{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 스레드 캐시 크기와 히트율을 보는 지표입니다. threads_created 증가율이 높으면 캐시 미스가 잦아 스레드 생성 오버헤드가 발생합니다.                                                      | threads_cached 대비 threads_created가 자주 증가하면 thread_cache_size 상향 또는 커넥션 풀 재활용을 점검합니다.                                                                                    |
| Temporary Objects              | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 임시 테이블/디스크 테이블/파일 생성 추이입니다.                                                                                                                                       | disk 임시↑ 시 tmp_table_size/max_heap_table_size 확장, 정렬/Group By 인덱스 보강, 쿼리 재작성으로 디스크 사용을 줄입니다.                                                                         |
| MySQL Temporary Objects        | `rate(mysql_global_status_created_tmp_tables{instance="$host"}[$interval]) or irate(mysql_global_status_created_tmp_tables{instance="$host"}[5m])`<br>`rate(mysql_global_status_created_tmp_disk_tables{instance="$host"}[$interval]) or irate(mysql_global_status_created_tmp_disk_tables{instance="$host"}[5m])`<br>`rate(mysql_global_status_created_tmp_files{instance="$host"}[$interval]) or irate(mysql_global_status_created_tmp_files{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 메모리/디스크 임시 테이블과 임시 파일 생성 속도입니다. 디스크 임시 테이블이 높으면 정렬·GROUP BY·서브쿼리에서 메모리 부족 또는 인덱스 부재 가능성이 큽니다.                           | sort_buffer_size/tmp_table_size 조정, 쿼리 재작성, 적절한 인덱싱을 검토합니다.                                                                                                                    |
| MySQL Select Types             | `rate(mysql_global_status_select_full_join{instance="$host"}[$interval]) or irate(mysql_global_status_select_full_join{instance="$host"}[5m])`<br>`rate(mysql_global_status_select_full_range_join{instance="$host"}[$interval]) or irate(mysql_global_status_select_full_range_join{instance="$host"}[5m])`<br>`rate(mysql_global_status_select_range{instance="$host"}[$interval]) or irate(mysql_global_status_select_range{instance="$host"}[5m])`<br>`rate(mysql_global_status_select_range_check{instance="$host"}[$interval]) or irate(mysql_global_status_select_range_check{instance="$host"}[5m])`<br>`rate(mysql_global_status_select_scan{instance="$host"}[$interval]) or irate(mysql_global_status_select_scan{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                       | SELECT 실행 유형 분포입니다. full_scan/full_join 비중이 높으면 인덱스 부재·부정확한 조인 조건 등 비효율 쿼리를 시사합니다.                                                            | full_scan/full_join 수치가 눈에 띄면 실행 계획 점검과 적절한 인덱스 추가를 우선 검토합니다.                                                                                                       |
| Sorts                          | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 정렬 수행 빈도와 유형(범위/스캔/머지 패스)입니다.                                                                                                                                     | merge_passes/scan 증가 시 ORDER BY 인덱스 추가·커버링 인덱스 적용, sort_buffer_size 조정, 쿼리 재작성으로 메모리 정렬 비중을 높입니다.                                                            |
| MySQL Sorts                    | `rate(mysql_global_status_sort_rows{instance="$host"}[$interval]) or irate(mysql_global_status_sort_rows{instance="$host"}[5m])`<br>`rate(mysql_global_status_sort_range{instance="$host"}[$interval]) or irate(mysql_global_status_sort_range{instance="$host"}[5m])`<br>`rate(mysql_global_status_sort_merge_passes{instance="$host"}[$interval]) or irate(mysql_global_status_sort_merge_passes{instance="$host"}[5m])`<br>`rate(mysql_global_status_sort_scan{instance="$host"}[$interval]) or irate(mysql_global_status_sort_scan{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 정렬된 행 수와 정렬 유형(범위/스캔) 및 merge_passes를 통해 메모리 정렬 vs 디스크 정렬 여부를 판단합니다. merge_passes 증가 시 sort_buffer_size 부족 또는 대용량 정렬 가능성이 큽니다. | merge_passes 또는 sort_scan이 높으면 ORDER BY 인덱스 정합성(커버링 인덱스) 확보, sort_buffer_size 조정, 쿼리 재작성(Group By/Order By) 등을 검토합니다.                                           |
| MySQL Slow Queries             | `rate(mysql_global_status_slow_queries{instance="$host"}[$interval]) or irate(mysql_global_status_slow_queries{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | long_query_time 임계치를 초과한 슬로우 쿼리 발생률입니다.                                                                                                                             | 증가 시 해당 시각의 slow log와 EXPLAIN으로 병목 원인을 파악하고 인덱싱/재작성/캐시를 검토합니다.                                                                                                  |
| Aborted                        | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 중단된 연결/클라이언트 지표입니다. 인증 실패/타임아웃/조기 종료 원인을 분류합니다.                                                                                                    | aborted 급증 시 wait_timeout/max_connect_errors/네트워크 오류·DNS·TLS 설정을 점검하고, 애플리케이션 커넥션 풀 재시도/타임아웃을 조정합니다.                                                       |
| MySQL Aborted Connections      | `rate(mysql_global_status_aborted_connects{instance="$host"}[$interval]) or irate(mysql_global_status_aborted_connects{instance="$host"}[5m])`<br>`rate(mysql_global_status_aborted_clients{instance="$host"}[$interval]) or irate(mysql_global_status_aborted_clients{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 인증 실패, 타임아웃, 클라이언트 조기 종료 등으로 중단된 연결/클라이언트 발생률입니다.                                                                                                 | 애플리케이션 커넥션 관리(wait_timeout, max_connect_errors), 네트워크 오류, 인증 실패를 점검합니다.                                                                                                |
| MySQL Table Locks              | `rate(mysql_global_status_table_locks_immediate{instance="$host"}[$interval]) or irate(mysql_global_status_table_locks_immediate{instance="$host"}[5m])`<br>`rate(mysql_global_status_table_locks_waited{instance="$host"}[$interval]) or irate(mysql_global_status_table_locks_waited{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 테이블 락 즉시/대기 발생 추이를 통해 락 경합 여부를 확인합니다.                                                                                                                       | waited가 상승하면 장기 트랜잭션/풀 스캔 쿼리를 프로세스리스트/슬로우로그로 식별하고, 적절한 인덱스/WHERE 재작성·격리수준 점검·배치 시간 분리를 수행합니다.                                        |
| Network                        | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | MySQL 네트워크 송수신 트래픽입니다.                                                                                                                                                   | 대용량 결과셋/백업/복제 이벤트와 상관 분석하고, 필요 시 결과 pagination·압축·쿼리 제한·복제 스로틀링을 적용합니다.                                                                                |
| MySQL Network Traffic          | `rate(mysql_global_status_bytes_received{instance="$host"}[$interval]) or irate(mysql_global_status_bytes_received{instance="$host"}[5m])`<br>`rate(mysql_global_status_bytes_sent{instance="$host"}[$interval]) or irate(mysql_global_status_bytes_sent{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | MySQL 네트워크 송수신 바이트/초입니다.                                                                                                                                                | 전송량 급증 시 큰 결과셋/대규모 dump 가능성. max_allowed_packet/압축/전송 중단 오류를 점검하고, 읽기 전용 트래픽은 캐시/레플리카로 오프로딩합니다.                                                |
| MySQL Network Usage Hourly     | `increase(mysql_global_status_bytes_received{instance="$host"}[1h])`<br>`increase(mysql_global_status_bytes_sent{instance="$host"}[1h])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 1시간 누적 수신/송신 바이트입니다.                                                                                                                                                    | 특정 시간대 스파이크를 배포/배치/백업과 연계해 원인을 파악하고, 스케줄 조정·레이트리밋·캐싱을 적용합니다.                                                                                         |
| Memory                         | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | MySQL 메모리 관련 개요입니다. 버퍼풀/로그 버퍼/캐시 등의 구성을 요약합니다.                                                                                                           | 버퍼풀 비중·스왑 여부를 확인해 innodb_buffer_pool_size·redo log 크기·중복 캐시(query cache/OS cache) 설정을 조정합니다.                                                                           |
| MySQL Internal Memory Overview | `node_memory_MemTotal_bytes{instance="$node_instance"}`<br>`mysql_global_status_innodb_page_size{instance="$host"} * on (instance) mysql_global_status_buffer_pool_pages{instance="$host",state="data"}`<br>`mysql_global_variables_innodb_log_buffer_size{instance="$host"}`<br>`mysql_global_variables_innodb_additional_mem_pool_size{instance="$host"}`<br>`mysql_global_status_innodb_mem_dictionary{instance="$host"}`<br>`mysql_global_variables_key_buffer_size{instance="$host"}`<br>`mysql_global_variables_query_cache_size{instance="$host"}`<br>`mysql_global_status_innodb_mem_adaptive_hash{instance="$host"}`<br>`mysql_global_variables_tokudb_cache_size{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                              | 시스템/엔진 내부 메모리(버퍼풀/로그 버퍼/딕셔너리 등) 구성 요약입니다.                                                                                                                | 스왑/메모리 압박 시 버퍼풀/로그 버퍼 비중을 조절하고, MySQL 8에서는 Query Cache 비활성화(미사용)를 권장합니다. AHI/딕셔너리 메모리 급증 시 인덱스/스키마 변경을 점검합니다.                       |
| Command, Handlers, Processes   | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 명령 유형·핸들러·프로세스 상태 개요입니다.                                                                                                                                            | 상위 COM\_\*·핸들러 지표로 테이블 스캔/랜덤 읽기 과다를 식별하고, 인덱스/쿼리 패턴/커넥션 생명주기를 최적화합니다.                                                                                |
| Top Command Counters           | `topk(5, rate(mysql_global_status_commands_total{instance="$host"}[$interval])>0) or topk(5, irate(mysql_global_status_commands_total{instance="$host"}[5m])>0)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 초당 상위 COM\_\* 명령 Top5입니다.                                                                                                                                                    | insert/update 폭주·select 폭주 등 유형별로 인덱싱/배치 스케줄/쓰기 버퍼링/캐싱을 적용해 병목을 완화합니다.                                                                                        |
| Top Command Counters Hourly    | `topk(5, increase(mysql_global_status_commands_total{instance="$host"}[1h])>0)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 1시간 누적 기준 상위 COM\_\* 명령 Top5입니다.                                                                                                                                         | 시간대별 패턴을 파악해 배치/ETL/백업과 충돌을 피하도록 스케줄링·자원 분리를 조정합니다.                                                                                                           |
| MySQL Handlers                 | `rate(mysql_global_status_handlers_total{instance="$host", handler!~"commit&#124;rollback&#124;savepoint.*&#124;prepare"}[$interval]) or irate(mysql_global_status_handlers_total{instance="$host", handler!~"commit&#124;rollback&#124;savepoint.*&#124;prepare"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 핸들러 호출 레이트입니다. handler_read_rnd(next)↑는 테이블 스캔, handler_read_key↑는 인덱스 활용입니다.                                                                               | 스캔 계열이 높으면 인덱스 설계/쿼리 재작성으로 랜덤 스캔을 줄이고, 핸들러 패턴 변화를 배포/스키마 변경과 연계해 검증합니다.                                                                       |
| MySQL Transaction Handlers     | `rate(mysql_global_status_handlers_total{instance="$host", handler=~"commit&#124;rollback&#124;savepoint.*&#124;prepare"}[$interval]) or irate(mysql_global_status_handlers_total{instance="$host", handler=~"commit&#124;rollback&#124;savepoint.*&#124;prepare"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 트랜잭션 관련 핸들러 레이트입니다. commit/rollback 급증은 트랜잭션 길이/충돌 증가 신호입니다.                                                                                         | 장기 트랜잭션을 줄이고, autocommit/격리수준/innodb_flush_log_at_trx_commit·sync_binlog 등 내구성 설정을 워크로드에 맞게 조정합니다.                                                               |
| Process States                 | `mysql_info_schema_processlist_threads{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 프로세스 상태 분포(예: 실행/대기)입니다. Locked/Waiting 장기 지속은 경합 신호입니다.                                                                                                  | 장시간 Sleep/Locked 세션을 찾아 쿼리/세션 종료, 커넥션 풀 idle timeout 조정, 문제 쿼리 재작성·인덱싱을 수행합니다.                                                                                |
| Top Process States Hourly      | `topk(5, avg_over_time(mysql_info_schema_processlist_threads{instance="$host"}[1h]))`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 1시간 평균 프로세스 상태 Top5입니다.                                                                                                                                                  | 특정 시간대 Locked/Running 상승 시 동시간대 Slow Queries/Locks와 교차 확인하고, 배치/인덱스 리빌드와 충돌을 해소합니다.                                                                           |
| Query Cache                    | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | (구버전 전용) 쿼리 캐시 개요입니다. MySQL 8에서는 제거되었습니다.                                                                                                                     | 구버전에서만 사용하세요. lowmem_prunes↑면 크기 과다/파편화로 성능 저하 가능. 가능하면 비활성화하고, 필요한 경우 사이즈/쿼리 패턴을 보수적으로 설정합니다.                                         |
| MySQL Query Cache Memory       | `mysql_global_status_qcache_free_memory{instance="$host"}`<br>`mysql_global_variables_query_cache_size{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | (구버전) 쿼리 캐시 메모리/사이즈입니다.                                                                                                                                               | 사용 중인 경우에만 의미가 있습니다. free_memory 급감/프룬 증가 시 캐시 축소 또는 비활성화를 검토합니다.                                                                                           |
| MySQL Query Cache Activity     | `rate(mysql_global_status_qcache_hits{instance="$host"}[$interval]) or irate(mysql_global_status_qcache_hits{instance="$host"}[5m])`<br>`rate(mysql_global_status_qcache_inserts{instance="$host"}[$interval]) or irate(mysql_global_status_qcache_inserts{instance="$host"}[5m])`<br>`rate(mysql_global_status_qcache_not_cached{instance="$host"}[$interval]) or irate(mysql_global_status_qcache_not_cached{instance="$host"}[5m])`<br>`rate(mysql_global_status_qcache_lowmem_prunes{instance="$host"}[$interval]) or irate(mysql_global_status_qcache_lowmem_prunes{instance="$host"}[5m])`<br>`mysql_global_status_qcache_queries_in_cache{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | (구버전) 쿼리 캐시 히트/삽입/미캐시/저메모리 프룬/캐시 쿼리 수입니다.                                                                                                                 | lowmem_prunes↑/not_cached↑면 캐시 비효율. 크기 축소·비활성화 또는 쿼리 정규화/파라미터화로 히트율을 개선합니다.                                                                                   |
| Files and Tables               | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 파일/테이블 오픈 및 캐시 상태 개요입니다.                                                                                                                                             | opened_files/tables 급증·미스/오버플로 발생 시 open_files_limit/table_open_cache 상향과 메타데이터 변동(테이블 생성/드롭) 최소화를 검토합니다.                                                    |
| MySQL File Openings            | `rate(mysql_global_status_opened_files{instance="$host"}[$interval]) or irate(mysql_global_status_opened_files{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 초당 파일 오픈 수(rate)입니다.                                                                                                                                                        | 수치가 높으면 파일 캐시 미스가 잦다는 신호입니다. open_files_limit 상향 및 table_open_cache 튜닝, 불필요한 테이블 생성/삭제를 줄입니다.                                                           |
| MySQL Open Files               | `mysql_global_status_open_files{instance="$host"}`<br>`mysql_global_variables_open_files_limit{instance="$host"}`<br>`mysql_global_status_innodb_num_open_files{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 현재 오픈 파일 수/리밋/InnoDB 오픈 파일 수입니다.                                                                                                                                     | 리밋 근접 시 open_files_limit·OS ulimit 상향, 테이블 캐시 개선이 필요합니다.                                                                                                                      |
| Table Openings                 | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 테이블 오픈/캐시 상태 개요입니다.                                                                                                                                                     | opened_tables·cache_misses/overflows 증가 시 table_open_cache 상향, 스키마/쿼리로 인한 테이블 변동 최소화를 검토합니다.                                                                           |
| MySQL Table Open Cache Status  | `rate(mysql_global_status_opened_tables{instance="$host"}[$interval]) or irate(mysql_global_status_opened_tables{instance="$host"}[5m])`<br>`rate(mysql_global_status_table_open_cache_hits{instance="$host"}[$interval]) or irate(mysql_global_status_table_open_cache_hits{instance="$host"}[5m])`<br>`rate(mysql_global_status_table_open_cache_misses{instance="$host"}[$interval]) or irate(mysql_global_status_table_open_cache_misses{instance="$host"}[5m])`<br>`rate(mysql_global_status_table_open_cache_overflows{instance="$host"}[$interval]) or irate(mysql_global_status_table_open_cache_overflows{instance="$host"}[5m])`<br>`(rate(mysql_global_status_table_open_cache_hits{instance="$host"}[$interval]) or irate(mysql_global_status_table_open_cache_hits{instance="$host"}[5m]))/((rate(mysql_global_status_table_open_cache_hits{instance="$host"}[$interval]) or irate(mysql_global_status_table_open_cache_hits{instance="$host"}[5m]))+(rate(mysql_global_status_table_open_cache_misses{instance="$host"}[$interval]) or irate(mysql_global_status_table_open_cache_misses{instance="$host"}[5m])))`           | 테이블 오픈 캐시 효율/미스/오버플로 상태입니다.                                                                                                                                       | miss/overflow↑ 또는 히트율↓면 table_open_cache 상향, 스레드당 테이블 캐시 영향 검토, 빈번한 테이블 생성/삭제 패턴을 줄입니다.                                                                     |
| MySQL Open Tables              | `mysql_global_status_open_tables{instance="$host"}`<br>`mysql_global_variables_table_open_cache{instance="$host"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 현재 오픈 테이블 수와 캐시 한도입니다.                                                                                                                                                | 오픈 수가 한도에 근접하면 table_open_cache 상향, 쿼리 패턴/ORM이 과도한 테이블 열기/닫기를 유발하는지 점검합니다.                                                                                 |
| MySQL Table Definition Cache   | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 테이블 정의 캐시 개요입니다.                                                                                                                                                          | opened_table_definitions/미스 증가 시 table_definition_cache 상향 및 빈번한 DDL을 줄입니다.                                                                                                       |
| MySQL Table Definition Cache   | `mysql_global_status_open_table_definitions{instance="$host"}`<br>`mysql_global_variables_table_definition_cache{instance="$host"}`<br>`rate(mysql_global_status_opened_table_definitions{instance="$host"}[$interval]) or irate(mysql_global_status_opened_table_definitions{instance="$host"}[5m])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 오픈된 테이블 정의 수/캐시 한도/오픈율입니다.                                                                                                                                         | 미스/오픈율↑면 table_definition_cache 상향과 DDL/테이블 수 조정이 필요합니다.                                                                                                                     |
| System Charts                  | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | MySQL 성능/용량/상태(연결, 쿼리, 메모리, I/O)를 종합적으로 보여줍니다.                                                                                                                | 추세가 평소와 다르면 관련 컴포넌트를 점검하고 임계치를 재평가합니다.                                                                                                                              |
| I/O Activity                   | `rate(node_vmstat_pgpgin{instance="$node_instance"}[$interval]) * 1024 or irate(node_vmstat_pgpgin{instance="$node_instance"}[5m]) * 1024`<br>`rate(node_vmstat_pgpgout{instance="$node_instance"}[$interval]) * 1024 or irate(node_vmstat_pgpgout{instance="$node_instance"}[5m]) * 1024`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 파일 페이지 입출입(바이트/초) 추이입니다. 캐시 스래싱/대량 I/O 징후를 조기에 포착합니다.                                                                                              | pgpgin/out↑와 Avg Wait/Busy%·큐 길이↑가 동반되면 파일 I/O 병목입니다. vm.dirty\_\*·readahead·저널 옵션 튜닝, 배치/백업 시간 분리, 캐싱/쿼리 지역성 개선을 수행합니다.                             |
| Memory Distribution            | `node_memory_MemTotal_bytes{instance="$node_instance"} - (node_memory_MemFree_bytes{instance="$node_instance"} + node_memory_Buffers{instance="$node_instance"} + node_memory_Cached{instance="$node_instance"})`<br>`node_memory_MemFree_bytes{instance="$node_instance"}`<br>`node_memory_Buffers{instance="$node_instance"}`<br>`node_memory_Cached{instance="$node_instance"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 시스템/엔진 내부 메모리(버퍼풀/로그 버퍼/딕셔너리 등) 구성을 요약합니다.                                                                                                              | 메모리 사용량이 임계치에 근접하면 누수 여부를 조사하고 한도/버퍼를 조정합니다.                                                                                                                    |
| CPU Usage / Load               | `clamp_max(((avg by (mode) ( (clamp_max(rate(node_cpu_seconds_total{instance="$node_instance",mode!="idle"}[$interval]),1)) or (clamp_max(irate(node_cpu_seconds_total{instance="$node_instance",mode!="idle"}[5m]),1)) ))*100 or (avg_over_time(node_cpu_seconds_total_average{instance=~"$node_instance", mode!="total", mode!="idle"}[$interval]) or avg_over_time(node_cpu_seconds_total_average{instance=~"$node_instance", mode!="total", mode!="idle"}[5m]))),100)`<br>`clamp_max(max by () (sum by (cpu) ( (clamp_max(rate(node_cpu_seconds_total{instance="$node_instance",mode!="idle",mode!="iowait"}[$interval]),1)) or (clamp_max(irate(node_cpu_seconds_total{instance="$node_instance",mode!="idle",mode!="iowait"}[5m]),1)) ))*100,100)`<br>`node_load1{instance="$node_instance"}`                                                                                                                                                                                                                                                                                                                                        | MySQL 성능/용량/상태(연결, 쿼리, 메모리, I/O)를 종합적으로 보여줍니다.                                                                                                                | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                                                                                            |
| Disk Latency                   | `sum((rate(node_disk_read_time_seconds_total{device!~"dm-.+", instance="$node_instance"}[$interval]) / rate(node_disk_reads_completed_total{device!~"dm-.+", instance="$node_instance"}[$interval])) or (irate(node_disk_read_time_seconds_total{device!~"dm-.+", instance="$node_instance"}[5m]) / irate(node_disk_reads_completed_total{device!~"dm-.+", instance="$node_instance"}[5m])) or avg_over_time(aws_rds_read_latency_average{instance="$node_instance"}[$interval]) or avg_over_time(aws_rds_read_latency_average{instance="$node_instance"}[5m]))`<br>`sum((rate(node_disk_write_time_seconds_total{device!~"dm-.+", instance="$node_instance"}[$interval]) / rate(node_disk_writes_completed_total{device!~"dm-.+", instance="$node_instance"}[$interval])) or (irate(node_disk_write_time_seconds_total{device!~"dm-.+", instance="$node_instance"}[5m]) / irate(node_disk_writes_completed_total{device!~"dm-.+", instance="$node_instance"}[5m])) or avg_over_time(aws_rds_write_latency_average{instance="$node_instance"}[$interval]) or avg_over_time(aws_rds_write_latency_average{instance="$node_instance"}[5m]))` | 읽기/쓰기 요청당 평균 지연(초)입니다. 사용자 체감 성능과 직결됩니다.                                                                                                                  | Read↑는 랜덤 읽기/캐시 미스, Write↑는 fsync/flush 폭주 가능성입니다. readahead/배치 쓰기·barrier 옵션·cgroup IO 제한을 조정하고, 필요 시 스토리지 클래스 업그레이드나 워크로드 분산을 수행합니다. |
| Network Traffic                | `sum(rate(node_network_receive_bytes_total{instance="$node_instance", device!="lo"}[$interval])) or sum(irate(node_network_receive_bytes_total{instance="$node_instance", device!="lo"}[5m])) or sum(max_over_time(rdsosmetrics_network_rx{instance="$node_instance"}[$interval])) or sum(max_over_time(rdsosmetrics_network_rx{instance="$node_instance"}[5m]))`<br>`sum(rate(node_network_transmit_bytes_total{instance="$node_instance", device!="lo"}[$interval])) or sum(irate(node_network_transmit_bytes_total{instance="$node_instance", device!="lo"}[5m])) or sum(max_over_time(rdsosmetrics_network_tx{instance="$node_instance"}[$interval])) or sum(max_over_time(rdsosmetrics_network_tx{instance="$node_instance"}[5m]))`                                                                                                                                                                                                                                                                                                                                                                                                   | MySQL 서버의 네트워크 송수신 트래픽을 나타냅니다.                                                                                                                                     | 트래픽 추세를 기반으로 대역폭·연결 안정성을 점검하고 부하 분산을 조정합니다.                                                                                                                      |
| Swap Activity                  | `rate(node_vmstat_pswpin{instance="$node_instance"}[$interval]) * 4096 or irate(node_vmstat_pswpin{instance="$node_instance"}[5m]) * 4096`<br>`rate(node_vmstat_pswpout{instance="$node_instance"}[$interval]) * 4096 or irate(node_vmstat_pswpout{instance="$node_instance"}[5m]) * 4096`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 스왑 인/아웃 바이트/초입니다. 지연 민감 워크로드에 치명적입니다.                                                                                                                      | pswpin/out>0 지속 시 swappiness↓, 버퍼풀/정렬/임시 테이블 메모리 튜닝, 메모리 증설 또는 스왑 비활성화를 검토합니다.                                                                               |

## nginx.json

| 패널                               | PromQL / 쿼리                                                                        | 의미                                                    | 활용                                                                                                                   |
| ---------------------------------- | ------------------------------------------------------------------------------------ | ------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| General Metrics                    | -                                                                                    | 핵심 지표 요약(자원/트래픽/요청)입니다.                 | 비정상 패널을 클릭해 상세로 드릴다운하고, 해당 영역(워커/업스트림/리밸런싱)에 즉시 조치합니다.                         |
| CPU Usage                          | `100 - (cpu_usage_idle{instance=~ "$instance*",cpu="cpu-total"})`                    | 호스트의 CPU 사용률(전체 코어 평균)을 보여줍니다.       | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                 |
| Current CPU Utilization %          | `100 - (cpu_usage_idle{instance=~ "$instance*",cpu="cpu-total"})`                    | 현재 시점의 CPU 사용률(%)입니다.                        | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                 |
| Current Memory Utilization         | `sum(mem_used{instance=~"$instance"})`                                               | 사용 중인 메모리 바이트 총합(선택 인스턴스 합계)입니다. | 증가 시 워커 프로세스/캐시 설정을 점검하고 limit/request 및 OS 페이지 캐시 정책을 조정합니다.                          |
| Network Input                      | `rate(net_bytes_recv[5m])`<br>`rate(net_conntrack_listener_conn_accepted_total[5m])` | 초당 수신 바이트, 초당 수락 연결 수입니다.              | 급증 시 backlog/worker_connections/keepalive 설정과 업스트림 레이트리밋·캐싱을 조정합니다.                             |
| Network Ouput                      | `rate(net_bytes_sent[5m])`<br>`rate(net_conntrack_listener_conn_accepted_total[5m])` | 초당 송신 바이트, 초당 수락 연결 수입니다.              | 급증 시 egress 대역폭/업스트림 처리량을 점검하고 gzip/브로틀링/캐싱을 조정합니다.                                      |
| Nginx Requests Status Code         | -                                                                                    | 상태코드별 요청/응답 분포를 시각화합니다.               | 가용성 저하나 오류 코드가 감지되면 즉시 알람을 확인하고 원인을 추적합니다.                                             |
| Response 2XX / 5m                  | `sum_over_time(nginxlog_resp_bytes{instance=~"$instance*", resp_code=~"20."}[5m])`   | 최근 5분간 2xx 응답 바이트 총합입니다.                  | 가용성 저하나 오류 코드가 감지되면 즉시 알람을 확인하고 원인을 추적합니다.                                             |
| Total Response 200 Req. [24h]      | `sum_over_time(nginxlog_resp_bytes{instance=~"$instance*", resp_code=~"200"}[24h])`  | 24시간 200 응답 바이트 총합입니다.                      | 증감 패턴으로 배포/마케팅 이벤트를 식별하고 캐시·오토스케일 규칙을 조정합니다.                                         |
| Response 4XX /5m                   | `sum_over_time(nginxlog_resp_bytes{instance=~"$instance*", resp_code=~"40."}[5m])`   | 최근 5분간 4xx 응답 바이트 총합입니다.                  | 가용성 저하나 오류 코드가 감지되면 즉시 알람을 확인하고 원인을 추적합니다.                                             |
| Total Response 404 Req. [24h]      | `sum_over_time(nginxlog_resp_bytes{instance=~"$instance*", resp_code=~"404"}[5m])`   | 5분 구간 404 응답 바이트 총합입니다.                    | 급증 시 라우팅/정책/정적 자원 경로를 점검하고 리다이렉트/정적 파일 배포를 수정합니다.                                  |
| Response 3XX                       | `sum_over_time(nginxlog_resp_bytes{instance=~"$instance*", resp_code=~"30."}[5m])`   | 최근 5분간 3xx 응답 바이트 총합입니다.                  | 가용성 저하나 오류 코드가 감지되면 즉시 알람을 확인하고 원인을 추적합니다.                                             |
| Response 5XX                       | `sum_over_time(nginxlog_resp_bytes{instance=~"$instance*", resp_code=~"50."}[5m])`   | 최근 5분간 5xx 응답 바이트 총합입니다.                  | 가용성 저하나 오류 코드가 감지되면 즉시 알람을 확인하고 원인을 추적합니다.                                             |
| Total Request 503 Response         | `sum_over_time(nginxlog_resp_bytes{instance=~"$instance*", resp_code=~"503"}[5m])`   | 최근 5분 503 응답 바이트 총합입니다.                    | upstream 상태/타임아웃/큐(backend pool)/rate-limit을 점검하고 서킷브레이커·재시도 정책을 적용합니다.                   |
| Nginx Metrics                      | -                                                                                    | Nginx 연결/요청 기본 상태 묶음입니다.                   | Accepts/Handled/Requests 간 불일치, Waiting 급증 여부를 확인해 backlog/worker 수/keepalive를 조정합니다.               |
| Nginx Connections Accepted         | `nginx_accepts{instance=~"$instance*"}`                                              | 서버가 수락한 연결의 누적 수(카운터)입니다.             | CPU 병목이 감지되면 리소스 제한, 스케일링 정책, 우선순위를 검토합니다.                                                 |
| Nginx Writing                      | `nginx_writing{instance=~"$instance*"}`                                              | 응답 전송 중인 현재 연결 수입니다.                      | 지속 증가 시 업스트림 지연/대용량 응답 가능성. sendfile/버퍼·압축·업스트림 타임아웃을 조정합니다.                      |
| Nginx Active Connections[accepted] | `nginx_active{instance=~"$instance*"}`                                               | 현재 활성 연결 수(읽기/쓰기 포함)입니다.                | 급증 시 worker_connections/worker_processes/backlog 튜닝과 L4/L7 분산 확장을 검토합니다.                               |
| Nginx Waiting Connections          | `nginx_waiting{instance=~"$instance*"}`                                              | 대기(keep-alive) 연결 수입니다.                         | Waiting 장기 상승 시 keepalive_timeout/requests 조정 및 정적 자원 캐시 정책을 강화합니다.                              |
| Handled Request                    | `nginx_handled{instance=~"$instance*"}`                                              | 처리된 연결 누적(accepts와 동일하면 정상 동작)입니다.   | accepts 대비 handled 감소 시 커넥션 드롭·자원 고갈 가능성. 워커/FD/백로그/보안 모듈을 점검합니다.                      |
| Nginx Requests                     | `nginx_requests{instance=~"$instance*"}`                                             | 처리된 요청의 누적 수(카운터)입니다.                    | Accepts/Handled/Waiting과 함께 보아 드롭/대기 여부를 확인하고, 급증 시 캐시·오토스케일·레이트리밋을 적용합니다.        |
| nginx_reading                      | `nginx_reading{instance=~"$instance*"}`                                              | 요청 헤더를 읽는 중인 현재 연결 수입니다.               | 장기 상승 시 느린 클라이언트/대형 헤더 가능성. client_header_buffer/large_client_header_buffers·타임아웃을 조정합니다. |
| Each Request Detail                | `nginxlog_resp_bytes{instance=~"$instance*"}`                                        | 로그에서 추출한 요청별 응답 바이트 시계열입니다.        | 상위 바이트/느린 URI를 식별해 캐시·압축·정적 오프로딩을 적용하고, 업스트림 타임아웃/리트라이를 튜닝합니다.             |

## node-exporter-full.json

| 패널                                | PromQL / 쿼리                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 의미                                                                                                                                                                                                                                                                         | 활용                                                                                                                                                                                                        |
| ----------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Quick CPU / Mem / Disk              | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 호스트의 CPU/Load/메모리/루트FS 상태를 한눈에 요약합니다.                                                                                                                                                                                                                    | 이상 징후가 보이면 아래 상세 패널(PSI, CPU, Disk, Network, FS)로 내려가 교차 점검합니다.                                                                                                                    |
| Pressure                            | `irate(node_pressure_cpu_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_pressure_memory_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_pressure_io_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_pressure_irq_stalled_seconds_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Linux PSI(Pressure Stall Information)입니다. CPU/메모리/I/O에서 작업이 대기·정체된 시간 비율(sec/sec)을 뜻합니다.                                                                                                                                                            | PSI가 지속 상승하면 해당 자원 병목을 의심하고 CPU Busy, Sys Load, Disk/Memory 상세 지표와 함께 원인을 좁힙니다.                                                                                             |
| CPU Busy                            | `100 * (1 - avg(rate(node_cpu_seconds_total{mode="idle", instance="$node"}[$__rate_interval])))`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 전체 코어 평균 비유휴(non-idle) 비율입니다. iowait/irq 등도 포함한 실사용률입니다.                                                                                                                                                                                           | 80% 이상이 지속되면 스케일링·스케줄 조정·프로파일링을 검토하고 PSI/Load와 교차 확인합니다.                                                                                                                  |
| Sys Load                            | `scalar(node_load1{instance="$node",job="$job"}) * 100 / count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu))`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 1분 load를 코어 수로 정규화한 값(%)입니다. 100%는 코어당 load=1을 의미합니다.                                                                                                                                                                                                | Load가 코어 수를 지속 초과하면 런큐 적체입니다. CPU Busy·iowait·PSI와 함께 원인을 판단합니다.                                                                                                               |
| RAM Used                            | `clamp_min((1 - (node_memory_MemAvailable_bytes{instance="$node", job="$job"} / node_memory_MemTotal_bytes{instance="$node", job="$job"})) * 100, 0)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | MemAvailable 기반 실사용률입니다. 캐시/버퍼 여유를 반영한 체감 사용을 보여줍니다.                                                                                                                                                                                            | 85% 이상 지속 시 워킹셋 증가·캐시 증가·누수 중 무엇인지 구분하고 swappiness/캐시 조정을 검토합니다.                                                                                                         |
| SWAP Used                           | `((node_memory_SwapTotal_bytes{instance="$node",job="$job"} - node_memory_SwapFree_bytes{instance="$node",job="$job"}) / (node_memory_SwapTotal_bytes{instance="$node",job="$job"})) * 100`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 스왑 사용률(%)입니다. 지연 민감 워크로드에서는 스왑 사용이 직접적인 성능 저하로 이어질 수 있습니다.                                                                                                                                                                          | 스왑 증가 시 pswpin/pswpout·working set을 확인하고 메모리 최적화, 스왑 비활성 또는 limit 조정을 검토합니다.                                                                                                 |
| Root FS Used                        | `( (node_filesystem_size_bytes{instance="$node", job="$job", mountpoint="/", fstype!="rootfs"} - node_filesystem_avail_bytes{instance="$node", job="$job", mountpoint="/", fstype!="rootfs"}) / node_filesystem_size_bytes{instance="$node", job="$job", mountpoint="/", fstype!="rootfs"} ) * 100`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 루트 파일시스템 사용률(%)입니다. 80/90% 임계 구간을 넘어가면 서비스 장애 위험이 커집니다.                                                                                                                                                                                    | 급증 시 원인(로그/코어덤프/스냅샷)을 확인하고 로테이션·정리·분리 마운트·증설 중 적절한 조치를 취합니다.                                                                                                     |
| CPU Cores                           | `count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu))`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 논리 CPU 코어 수입니다. Load 정규화와 용량 계획의 기준이 됩니다.                                                                                                                                                                                                             | 코어 수 대비 Load/CPU Busy/PSI를 함께 보아 스케일링·스케줄 조정 필요성을 판단합니다.                                                                                                                        |
| RAM Total                           | `node_memory_MemTotal_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 총 RAM 용량(바이트)입니다.                                                                                                                                                                                                                                                   | 메모리 request/limit, 워킹셋·캐시 해석의 모수로 활용합니다.                                                                                                                                                 |
| SWAP Total                          | `node_memory_SwapTotal_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 총 스왑 용량(바이트)입니다.                                                                                                                                                                                                                                                  | pswpin/out, swappiness와 함께 스왑 정책 적정성을 판단합니다.                                                                                                                                                |
| RootFS Total                        | `node_filesystem_size_bytes{instance="$node",job="$job",mountpoint="/",fstype!="rootfs"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 루트 파일시스템의 총 용량(바이트)입니다.                                                                                                                                                                                                                                     | 사용률·증가 속도와 함께 용량 계획과 파티션 구성을 검토합니다.                                                                                                                                               |
| Uptime                              | `node_time_seconds{instance="$node",job="$job"} - node_boot_time_seconds{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 부팅 이후 경과 시간(초)입니다.                                                                                                                                                                                                                                               | 갑작스런 리셋/재부팅 확인, 메트릭 공백 구간 식별에 활용합니다.                                                                                                                                              |
| Basic CPU / Mem / Net / Disk        | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 핵심 리소스(CPU/메모리/네트워크/디스크) 요약 섹션입니다.                                                                                                                                                                                                                     | 이상 징후가 보이면 하위 상세 패널로 드릴다운해 원인을 좁힙니다.                                                                                                                                             |
| CPU Basic                           | `sum(irate(node_cpu_seconds_total{instance="$node",job="$job", mode="system"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{instance="$node",job="$job", mode="user"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{instance="$node",job="$job", mode="iowait"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{instance="$node",job="$job", mode=~".*irq"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{instance="$node",job="$job", mode!='idle',mode!='user',mode!='system',mode!='iowait',mode!='irq',mode!='softirq'}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{instance="$node",job="$job", mode="idle"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | CPU 모드별 비중(system/user/iowait/irq/기타/idle)을 코어 수로 정규화해 보여줍니다. iowait 증가는 디스크/네트워크 병목 신호입니다.                                                                                                                                            | iowait·irq/softirq·steal 비중을 함께 보고, Disk/Network·Softnet·PSI 지표로 병목 지점을 좁힙니다.                                                                                                            |
| Memory Basic                        | `node_memory_MemTotal_bytes{instance="$node",job="$job"}`<br>`node_memory_MemTotal_bytes{instance="$node",job="$job"} - node_memory_MemFree_bytes{instance="$node",job="$job"} - (node_memory_Cached_bytes{instance="$node",job="$job"} + node_memory_Buffers_bytes{instance="$node",job="$job"} + node_memory_SReclaimable_bytes{instance="$node",job="$job"})`<br>`node_memory_Cached_bytes{instance="$node",job="$job"} + node_memory_Buffers_bytes{instance="$node",job="$job"} + node_memory_SReclaimable_bytes{instance="$node",job="$job"}`<br>`node_memory_MemFree_bytes{instance="$node",job="$job"}`<br>`(node_memory_SwapTotal_bytes{instance="$node",job="$job"} - node_memory_SwapFree_bytes{instance="$node",job="$job"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 총 RAM, 실사용(캐시/버퍼/SReclaimable 제외), 캐시/버퍼/재활용 가능(SReclaimable), Free, 사용 중인 Swap을 한눈에 보여줍니다. ‘실사용’은 즉시 회수 불가 워킹셋의 근사치입니다.                                                                                                 | 실사용이 지속 상승하거나 Swap이 증가하면 pswpin/pswpout·Page Fault·PSI Memory와 교차 확인해 누수/메모리 압박/디스크 병목을 구분하고, swappiness·캐시 정책·리밸런싱을 조정합니다.                            |
| Network Traffic Basic               | `rate(node_network_receive_bytes_total{instance="$node",job="$job"}[$__rate_interval])*8`<br>`rate(node_network_transmit_bytes_total{instance="$node",job="$job"}[$__rate_interval])*8`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 초당 수신/송신 비트 전송률(bps)입니다. 링크 속도와 비교해 사용률을 가늠합니다.                                                                                                                                                                                               | 에러/드롭·softnet과 교차 확인해 포화 여부를 판단하고, 필요 시 NIC 튜닝·스케일아웃을 검토합니다.                                                                                                             |
| Disk Space Used Basic               | `((node_filesystem_size_bytes{instance="$node", job="$job", device!~"rootfs"} - node_filesystem_avail_bytes{instance="$node", job="$job", device!~"rootfs"}) / node_filesystem_size_bytes{instance="$node", job="$job", device!~"rootfs"}) * 100`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 마운트된 파일시스템 사용률(%)입니다.                                                                                                                                                                                                                                         | 80/90% 임계 기준을 적용하고 증가 속도가 빠르면 로그/스냅샷/디렉터리별 점유를 조사합니다.                                                                                                                    |
| CPU                                 | `sum(irate(node_cpu_seconds_total{mode="system",instance="$node",job="$job"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{mode="user",instance="$node",job="$job"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{mode="nice",instance="$node",job="$job"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{mode="iowait",instance="$node",job="$job"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{mode="irq",instance="$node",job="$job"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{mode="softirq",instance="$node",job="$job"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{mode="steal",instance="$node",job="$job"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum(irate(node_cpu_seconds_total{mode="idle",instance="$node",job="$job"}[$__rate_interval])) / scalar(count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu)))`<br>`sum by(instance) (irate(node_cpu_guest_seconds_total{instance="$node",job="$job"}[$__rate_interval])) / on(instance) group_left sum by (instance)((irate(node_cpu_seconds_total{instance="$node",job="$job"}[$__rate_interval]))) > 0` | CPU 모드별 비중(system/user/nice/iowait/irq/softirq/steal/idle/guest)을 코어 수 기준으로 보여줍니다.                                                                                                                                                                         | steal/guest가 높으면 가상화 간섭 가능성, iowait이 높으면 스토리지 병목 가능성. PSI/디스크 지표와 교차 확인합니다.                                                                                           |
| Memory                              | `node_memory_MemTotal_bytes{instance="$node",job="$job"} - node_memory_MemFree_bytes{instance="$node",job="$job"} - node_memory_Buffers_bytes{instance="$node",job="$job"} - node_memory_Cached_bytes{instance="$node",job="$job"} - node_memory_Slab_bytes{instance="$node",job="$job"} - node_memory_PageTables_bytes{instance="$node",job="$job"} - node_memory_SwapCached_bytes{instance="$node",job="$job"}`<br>`node_memory_PageTables_bytes{instance="$node",job="$job"}`<br>`node_memory_SwapCached_bytes{instance="$node",job="$job"}`<br>`node_memory_Slab_bytes{instance="$node",job="$job"}`<br>`node_memory_Cached_bytes{instance="$node",job="$job"}`<br>`node_memory_Buffers_bytes{instance="$node",job="$job"}`<br>`node_memory_MemFree_bytes{instance="$node",job="$job"}`<br>`(node_memory_SwapTotal_bytes{instance="$node",job="$job"} - node_memory_SwapFree_bytes{instance="$node",job="$job"})`<br>`node_memory_HardwareCorrupted_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 메모리 구성 세부(Used(캐시/버퍼/슬랩/PGT 제외), PageTables, SwapCached, Slab, Cached, Buffers, Free, Swap 사용, 하드웨어 오류)를 분해해 보여줍니다. 각 항목의 증감으로 워킹셋 증가, 스왑 캐시 잔존, 커널 슬랩 확장, 페이지 테이블 증가(프로세스/VM 수 증가) 등을 판별합니다. | Used↑와 동시에 SwapCached·pswpin↑이면 스왑 스래싱 가능성이 큽니다. SUnreclaim/Slab↑는 커널 캐시 누수 의심, PageTables↑는 프로세스 폭증/VM 수 증가를 의심합니다. I/O·PSI·Fault와 교차 확인해 조치합니다.     |
| Network Traffic                     | `rate(node_network_receive_bytes_total{instance="$node",job="$job"}[$__rate_interval])*8`<br>`rate(node_network_transmit_bytes_total{instance="$node",job="$job"}[$__rate_interval])*8`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 초당 수신/송신 bps입니다. 인터페이스 속도와 함께 사용률을 추정합니다.                                                                                                                                                                                                        | 에러/드롭·Softnet·Conntrack 지표와 함께 네트워크 포화/패킷 폭주 여부를 판단합니다.                                                                                                                          |
| Network Saturation                  | `rate(node_network_receive_bytes_total{instance="$node",job="$job"}[$__rate_interval]) / ignoring(speed) node_network_speed_bytes{instance="$node",job="$job", speed!="-1"}`<br>`(rate(node_network_transmit_bytes_total{instance="$node",job="$job"}[$__rate_interval]) / ignoring(speed) node_network_speed_bytes{instance="$node",job="$job", speed!="-1"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 링크 속도 대비 수신/송신 사용률(0~1)입니다. 링크 포화 여부 판단에 사용합니다.                                                                                                                                                                                                | 0.7~0.8 이상 지속 시 병목 가능. 에러/드롭/softnet 지표와 함께 확인하고 NIC 튜닝·스케일아웃을 검토합니다.                                                                                                    |
| Disk IOps                           | `irate(node_disk_reads_completed_total{instance="$node",job="$job",device=~"[a-z]+&#124;nvme[0-9]+n[0-9]+&#124;mmcblk[0-9]+"}[$__rate_interval])`<br>`irate(node_disk_writes_completed_total{instance="$node",job="$job",device=~"[a-z]+&#124;nvme[0-9]+n[0-9]+&#124;mmcblk[0-9]+"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 디스크 초당 I/O 횟수(IOPS)입니다. 랜덤/순차 패턴과 블록 크기에 따라 적정치가 다릅니다.                                                                                                                                                                                       | IOPS 급증과 함께 대기시간/큐 길이 증가 시 스토리지 포화 신호입니다. 스토리지 클래스·캐시·배치를 재검토합니다.                                                                                               |
| Disk Throughput                     | `irate(node_disk_read_bytes_total{instance="$node",job="$job",device=~"[a-z]+&#124;nvme[0-9]+n[0-9]+&#124;mmcblk[0-9]+"}[$__rate_interval])`<br>`irate(node_disk_written_bytes_total{instance="$node",job="$job",device=~"[a-z]+&#124;nvme[0-9]+n[0-9]+&#124;mmcblk[0-9]+"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 초당 읽기/쓰기 바이트(B/s)입니다. 장치/파일시스템·압축·캐시의 영향이 큽니다.                                                                                                                                                                                                 | Throughput 대비 높은 대기시간은 병목 신호입니다. 블록 크기/큐뎁스/스케줄러를 함께 점검하세요.                                                                                                               |
| Filesystem Space Available          | `node_filesystem_avail_bytes{instance="$node",job="$job",device!~'rootfs'}`<br>`node_filesystem_free_bytes{instance="$node",job="$job",device!~'rootfs'}`<br>`node_filesystem_size_bytes{instance="$node",job="$job",device!~'rootfs'}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 파일시스템 가용/여유/총량입니다. avail은 비루트가 쓰기 가능한 공간을 의미합니다.                                                                                                                                                                                             | 80/90% 임계 알람 기준을 적용하고, 급증 시 원인(로그/스냅샷/코어덤프)을 조사·정리합니다.                                                                                                                     |
| Filesystem Used                     | `node_filesystem_size_bytes{instance="$node",job="$job",device!~'rootfs'} - node_filesystem_avail_bytes{instance="$node",job="$job",device!~'rootfs'}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 파일시스템 사용량(바이트)입니다. Used/Size\*100으로 퍼센트를 산출해 임계 관리를 합니다.                                                                                                                                                                                      | 증가 속도를 함께 보고 로테이션/압축/분할 마운트/증설 등 대응을 결정합니다.                                                                                                                                  |
| Disk I/O Utilization                | `irate(node_disk_io_time_seconds_total{instance="$node",job="$job",device=~"[a-z]+&#124;nvme[0-9]+n[0-9]+&#124;mmcblk[0-9]+"} [$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 장치가 I/O 처리에 바빴던 시간의 비율(0~1)입니다. 1에 근접하면 포화 상태입니다.                                                                                                                                                                                               | 0.9 이상 지속 시 고지연/드롭 위험. IOPS/Throughput/대기시간과 함께 병목 지점을 식별합니다.                                                                                                                  |
| Pressure Stall Information          | `rate(node_pressure_cpu_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_pressure_memory_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_pressure_memory_stalled_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_pressure_io_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_pressure_io_stalled_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_pressure_irq_stalled_seconds_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | PSI 세부 지표입니다. waiting은 대기, stalled는 진행 불가 상태 비율을 뜻합니다.                                                                                                                                                                                               | 특정 자원의 PSI가 치솟으면 해당 자원(CPU/메모리/I/O) 튜닝·리밸런싱·스케일링을 우선 검토합니다.                                                                                                              |
| Memory Committed                    | `node_memory_Committed_AS_bytes{instance="$node",job="$job"}`<br>`node_memory_CommitLimit_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Committed_AS는 커널이 할당을 약속한(커밋된) 가상 메모리 총량, CommitLimit은 시스템이 보장 가능한 커밋 한계(MemTotal+Swap, overcommit 정책 영향)입니다. 비율이 한계에 근접하면 OOM 위험이 커집니다.                                                                           | Committed_AS/CommitLimit > 0.9 시 vm.overcommit_memory/ratio 설정과 실제 cgroup limit 불일치를 점검하고, 워크로드 메모리 사용(프로세스/캐시)과 스왑 정책을 조정합니다.                                      |
| Memory Writeback and Dirty          | `node_memory_Writeback_bytes{instance="$node",job="$job"}`<br>`node_memory_WritebackTmp_bytes{instance="$node",job="$job"}`<br>`node_memory_Dirty_bytes{instance="$node",job="$job"}`<br>`node_memory_NFS_Unstable_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Dirty는 아직 디스크에 기록되지 않은 페이지 캐시, Writeback은 디스크로 플러시 중인 바이트입니다. WritebackTmp는 임시 파일시스템, NFS_Unstable은 NFS에서 아직 안정화되지 않은 데이터입니다.                                                                                    | Dirty가 장시간 높거나 Writeback이 누적되면 디스크 병목/flush 지연 신호입니다. iowait/Throughput과 함께 보고 vm.dirty\_\* 튜닝, 스토리지 성능/큐뎁스/저널 옵션을 점검합니다.                                 |
| Memory Slab                         | `node_memory_SUnreclaim_bytes{instance="$node",job="$job"}`<br>`node_memory_SReclaimable_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 커널 슬랩 캐시 크기입니다. SReclaimable은 필요 시 회수 가능한 캐시(dentry/inode 등), SUnreclaim은 회수 불가 캐시입니다. SUnreclaim 증가 지속은 커널 메모리 누수를 시사합니다.                                                                                                | slabtop 또는 /proc/slabinfo로 어떤 슬랩이 커지는지 확인하고, 파일 수/ inode/dentry 폭주나 드라이버 버그를 점검합니다. 필요 시 커널/FS 설정 조정, 워크로드 완화가 필요합니다.                                |
| Memory Shared and Mapped            | `node_memory_Mapped_bytes{instance="$node",job="$job"}`<br>`node_memory_Shmem_bytes{instance="$node",job="$job"}`<br>`node_memory_ShmemHugePages_bytes{instance="$node",job="$job"}`<br>`node_memory_ShmemPmdMapped_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Mapped는 파일을 mmap한 메모리, Shmem은 tmpfs/공유 메모리이며 ShmemHugePages/PMD는 HugePage 기반 공유 메모리 사용을 의미합니다.                                                                                                                                               | Mapped 급증은 파일 매핑 과다(로그/DB/캐시) 가능성을, Shmem 급증은 IPC/컨테이너 공유메모리 사용 증가를 뜻합니다. 워크로드·ulimit·HugePage 정책을 점검합니다.                                                 |
| Memory LRU Active / Inactive (%)    | `(node_memory_Inactive_bytes{instance="$node",job="$job"}) / (node_memory_MemTotal_bytes{instance="$node",job="$job"})`<br>`(node_memory_Active_bytes{instance="$node",job="$job"}) / (node_memory_MemTotal_bytes{instance="$node",job="$job"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | LRU 기준 Active/Inactive 비율입니다. Active가 높으면 워킹셋이 크고, Inactive가 높으면 회수 가능한 캐시/냉 데이터 비중이 큽니다.                                                                                                                                              | Active_anon 상승은 앱 워킹셋 증가·스왑 위험을, Inactive_file 상승은 페이지 캐시 비중 증가를 의미합니다. PSI 메모리·pgpgin/out과 함께 스로틀링/캐시 히트율을 보세요.                                         |
| Memory LRU Active / Inactive Detail | `node_memory_Inactive_file_bytes{instance="$node",job="$job"}`<br>`node_memory_Inactive_anon_bytes{instance="$node",job="$job"}`<br>`node_memory_Active_file_bytes{instance="$node",job="$job"}`<br>`node_memory_Active_anon_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Active/File/Anon, Inactive/File/Anon으로 LRU를 분해해 캐시 vs 익명 메모리 워킹셋을 구분합니다. Active_anon은 스왑 대상이며, Active_file은 캐시 히트와 직접 관련됩니다.                                                                                                       | Active_anon↑ + pswpin/out↑는 스왑 압박 신호입니다. Inactive_file↑는 캐시 적체이므로 reclaim/드롭 캐시·I/O 패턴을 확인합니다.                                                                                |
| Memory Kernel / CPU / IO            | `node_memory_KernelStack_bytes{instance="$node",job="$job"}`<br>`node_memory_Percpu_bytes{instance="$node",job="$job"}`<br>`node_memory_Bounce_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | KernelStack은 스레드당 커널 스택 총량, Percpu는 CPU별 캐시/할당자 메모리, Bounce는 고메모리(I/O) 버퍼(일부 아키텍처)입니다.                                                                                                                                                  | KernelStack 급증은 스레드 폭증/누수 가능성, Percpu 급증은 per-cpu 오브젝트 증가를 의미합니다. 스레드 수, irq/softirq, 드라이버 I/O 경로를 점검합니다.                                                       |
| Memory Vmalloc                      | `node_memory_VmallocChunk_bytes{instance="$node",job="$job"}`<br>`node_memory_VmallocTotal_bytes{instance="$node",job="$job"}`<br>`node_memory_VmallocUsed_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 커널 vmalloc 영역 사용/총량/가용 최대 연속 청크 크기입니다. Chunk가 작아지면 단편화로 대규모 vmalloc 실패 위험이 커집니다.                                                                                                                                                   | 드라이버/모듈이 큰 vmalloc을 요구한다면 조기 경보로 활용합니다. 장기적으로는 모듈/커널 업그레이드 또는 매개변수 조정이 필요할 수 있습니다.                                                                  |
| Memory Anonymous                    | `node_memory_AnonHugePages_bytes{instance="$node",job="$job"}`<br>`node_memory_AnonPages_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 익명 메모리(프로세스 힙/스택 등)와 그 중 HugePages(THP) 사용량입니다. 익명 메모리는 스왑 대상이며 워킹셋의 핵심입니다.                                                                                                                                                       | AnonPages가 지속적으로 증가하면 누수/캐시 미스 증가를 의심합니다. THP로 인한 지연 이슈가 있으면 transparent_hugepage 설정을 재검토합니다.                                                                   |
| Memory Unevictable and MLocked      | `node_memory_Unevictable_bytes{instance="$node",job="$job"}`<br>`node_memory_Mlocked_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 회수 불가(unevictable) 페이지와 mlock으로 고정된 메모리 크기입니다. 값이 높으면 캐시 회수·스왑이 제한됩니다.                                                                                                                                                                 | mlock 사용 프로세스와 tmpfs/hugetlb 사용을 점검하고, 불필요한 잠금 해제·리밸런싱을 수행합니다. 컨테이너 한도와도 교차 확인하세요.                                                                           |
| Memory DirectMap                    | `node_memory_DirectMap1G_bytes{instance="$node",job="$job"}`<br>`node_memory_DirectMap2M_bytes{instance="$node",job="$job"}`<br>`node_memory_DirectMap4k_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 물리 메모리에 대한 커널의 직접 매핑(1G/2M/4K 단위) 분포입니다. THP/페이지 크기 구성과 관계가 있습니다.                                                                                                                                                                       | 직접 사용량 지표라기보다 매핑 특성 확인용입니다. THP 정책 변경 전후 분포 변화를 참고합니다.                                                                                                                 |
| Memory HugePages                    | `node_memory_HugePages_Free{instance="$node",job="$job"} * node_memory_Hugepagesize_bytes{instance="$node",job="$job"}`<br>`node_memory_HugePages_Rsvd{instance="$node",job="$job"} * node_memory_Hugepagesize_bytes{instance="$node",job="$job"}`<br>`node_memory_HugePages_Surp{instance="$node",job="$job"} * node_memory_Hugepagesize_bytes{instance="$node",job="$job"}`<br>`node_memory_HugePages_Total{instance="$node",job="$job"} * node_memory_Hugepagesize_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | HugePages의 Free/Reserved/Surplus/Total 바이트입니다. 예약(Rsvd)은 할당 예정, Surp는 초과 확보분을 뜻합니다.                                                                                                                                                                 | DB/캐시가 HugePages를 요구하면 Free가 충분한지 확인하고, 예약만 많고 사용이 적으면 설정 과다 여부를 재평가합니다.                                                                                           |
| Memory Pages In / Out               | `irate(node_vmstat_pgpgin{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_vmstat_pgpgout{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 페이지 캐시 입출입(pgpgin/pgpgout) 속도입니다. 스왑이 아닌 파일시스템 페이지 이동량으로 캐시 교체 정도를 나타냅니다.                                                                                                                                                         | pgpgin/out 급증은 캐시 스래싱·I/O 폭주 신호입니다. 디스크 Throughput·Dirty/Writeback·PSI와 함께 병목을 진단하세요.                                                                                          |
| Memory Pages Swap In / Out          | `irate(node_vmstat_pswpin{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_vmstat_pswpout{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 스왑 인/아웃 페이지 수입니다. 비율이 높으면 메모리 압박으로 디스크 I/O가 빈번해져 지연이 커집니다.                                                                                                                                                                           | pswpin/out이 지속되면 swappiness·메모리 한도·워킹셋 최적화를 검토하고, 지연 민감 워크로드는 스왑 비활성·메모리 증설을 고려합니다.                                                                           |
| Memory Page Faults                  | `irate(node_vmstat_pgfault{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_vmstat_pgmajfault{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_vmstat_pgfault{instance="$node",job="$job"}[$__rate_interval]) - irate(node_vmstat_pgmajfault{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 총 페이지 폴트, 그중 Major 폴트(디스크 접근 필요)와 Minor 폴트(메모리 내 해결) 분해입니다. Major 비중 증가는 I/O/스왑 병목 신호입니다.                                                                                                                                       | Major 폴트 급증 시 디스크 지연·스왑 활동과 함께 확인하고, 캐시/메모리 증설·쿼리/워크로드 지역성 개선을 검토합니다.                                                                                          |
| OOM Killer                          | `irate(node_vmstat_oom_kill{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 커널 OOM Killer가 프로세스를 종료한 이벤트 발생률입니다. 메모리 부족으로 강제 종료가 발생했음을 의미합니다.                                                                                                                                                                  | OOM 발생 시 dmesg/컨테이너 로그로 희생자·원인 파악, cgroup limit/requests 재평가, 누수·스파이크 방어(큐/레이트리밋) 적용을 검토합니다.                                                                      |
| Time Synchronized Drift             | `node_timex_estimated_error_seconds{instance="$node",job="$job"}`<br>`node_timex_offset_seconds{instance="$node",job="$job"}`<br>`node_timex_maxerror_seconds{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 시계 추정 오차/오프셋/최대 오차입니다. 시간 동기화 정확도를 나타냅니다.                                                                                                                                                                                                      | 오프셋이 커지면 NTP/PTP 상태, 네트워크 지연, 하드웨어 타이머 이슈를 점검합니다.                                                                                                                             |
| Time PLL Adjust                     | `node_timex_loop_time_constant{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 타임 싱크 루프(PLL) 타임 상수입니다. 반응성/안정성의 타협점입니다.                                                                                                                                                                                                           | 환경에 맞는 타임 상수/동기화 소스를 선택해 오프셋 변동을 최소화합니다.                                                                                                                                      |
| Time Synchronized Status            | `node_timex_sync_status{instance="$node",job="$job"}`<br>`node_timex_frequency_adjustment_ratio{instance="$node",job="$job"}`<br>`node_timex_tick_seconds{instance="$node",job="$job"}`<br>`node_timex_tai_offset_seconds{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 동기화 여부, 주파수 보정 비율, tick, TAI 오프셋 상태입니다.                                                                                                                                                                                                                  | 동기화 해제/보정 과다 시 타임 서버/네트워크 상태를 점검하고 소스冗長화(다중 NTP/PTP)를 고려합니다.                                                                                                          |
| PPS Frequency / Stability           | `node_timex_pps_frequency_hertz{instance="$node",job="$job"}`<br>`node_timex_pps_stability_hertz{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | PPS 입력 주파수와 안정도입니다(PTP/하드웨어 클럭).                                                                                                                                                                                                                           | 불안정 시 PPS 소스/케이블/전원 간섭을 점검합니다.                                                                                                                                                           |
| PPS Time Accuracy                   | `node_timex_pps_jitter_seconds{instance="$node",job="$job"}`<br>`node_timex_pps_shift_seconds{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | PPS 지터/시프트(시간 정확도)입니다.                                                                                                                                                                                                                                          | 지터가 크면 클럭 품질/간섭 문제를 확인합니다.                                                                                                                                                               |
| PPS Sync Events                     | `irate(node_timex_pps_calibration_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_timex_pps_error_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_timex_pps_stability_exceeded_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_timex_pps_jitter_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | PPS 보정/오류/안정도 초과/지터 이벤트 비율입니다.                                                                                                                                                                                                                            | 오류/초과 이벤트 증가 시 PPS 소스/클럭 트리/동기화 설정을 점검합니다.                                                                                                                                       |
| Processes Status                    | `node_procs_blocked{instance="$node",job="$job"}`<br>`node_procs_running{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | I/O로 블록된 프로세스 수와 러닝 프로세스 수입니다.                                                                                                                                                                                                                           | blocked↑는 I/O 병목, running↑는 CPU 경쟁을 시사합니다. PSI/CPU/Disk 지표와 교차 확인합니다.                                                                                                                 |
| Processes Detailed States           | `node_processes_state{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 프로세스 상태 분포(R/S/D/Z/T 등)입니다.                                                                                                                                                                                                                                      | D(불가중단 I/O)·Z(좀비) 증가 시 파일시스템/프로세스 종료 처리 문제를 점검합니다.                                                                                                                            |
| Processes Forks                     | `irate(node_forks_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 초당 포크(프로세스 생성) 수입니다.                                                                                                                                                                                                                                           | 급증 시 작업 스케줄/배치 폭주나 프로세스 누수 가능성을 점검합니다.                                                                                                                                          |
| CPU Saturation per Core             | `irate(node_schedstat_running_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_schedstat_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_schedstat_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval]) / (irate(node_schedstat_running_seconds_total{instance="$node",job="$job"}[$__rate_interval]) + irate(node_schedstat_waiting_seconds_total{instance="$node",job="$job"}[$__rate_interval]))`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 코어별 러닝/대기 시간과 대기 비율입니다. 대기 비율↑는 런큐 적체/스케줄 지연을 의미합니다.                                                                                                                                                                                    | 대기 비율이 높으면 CPU 스케일링·스케줄러 정책 조정·우선순위 조정을 검토합니다.                                                                                                                              |
| PIDs Number and Limit               | `node_processes_pids{instance="$node",job="$job"}`<br>`node_processes_max_processes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 현재 PID 수와 시스템 PID 최대치입니다.                                                                                                                                                                                                                                       | 최대치 근접 시 PID 누수/좀비 처리, pid_max 상향 여부를 검토합니다.                                                                                                                                          |
| Threads Number and Limit            | `node_processes_threads{instance="$node",job="$job"}`<br>`node_processes_max_threads{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 현재 스레드 수와 시스템 스레드 최대치입니다.                                                                                                                                                                                                                                 | 스레드 급증은 컨텍스트 스위치 증가·스케줄 지연을 유발합니다. 스레드 풀 크기/ULIMIT을 점검합니다.                                                                                                            |
| Context Switches / Interrupts       | `irate(node_context_switches_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_intr_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 초당 컨텍스트 스위치와 인터럽트 횟수입니다.                                                                                                                                                                                                                                  | 값이 비정상적으로 높으면 스레드 과다/작은 패킷 폭주/디바이스 인터럽트 빈발을 의심하고, 원인을 구간별로 분리합니다.                                                                                          |
| System Load                         | `node_load1{instance="$node",job="$job"}`<br>`node_load5{instance="$node",job="$job"}`<br>`node_load15{instance="$node",job="$job"}`<br>`count(count(node_cpu_seconds_total{instance="$node",job="$job"}) by (cpu))`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 1/5/15분 평균 런큐 길이와 코어 수입니다. 코어 수를 초과하면 큐 적체를 의미합니다.                                                                                                                                                                                            | Load가 코어 수를 지속 초과하면 스케일링/우선순위 조정/배치 시간 변경을 검토합니다.                                                                                                                          |
| CPU Frequency Scaling               | `node_cpu_scaling_frequency_hertz{instance="$node",job="$job"}`<br>`avg(node_cpu_scaling_frequency_max_hertz{instance="$node",job="$job"})`<br>`avg(node_cpu_scaling_frequency_min_hertz{instance="$node",job="$job"})`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 현재/최대/최소 CPU 클럭입니다. 절전/터보 정책에 따른 변동을 확인합니다.                                                                                                                                                                                                      | 클럭이 낮게 고정되면 스케일링 정책(CPU governor)과 온도/전력 제한을 점검합니다.                                                                                                                             |
| CPU Schedule Timeslices             | `irate(node_schedstat_timeslices_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 초당 스케줄러 타임슬라이스 수입니다.                                                                                                                                                                                                                                         | 비정상 급증은 스레드 수/타임슬라이스 길이 변화에 기인할 수 있으니 컨텍스트 스위치와 함께 봅니다.                                                                                                            |
| IRQ Detail                          | `irate(node_interrupts_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 디바이스/라인별 인터럽트 발생률입니다.                                                                                                                                                                                                                                       | 특정 라인 급증 시 해당 디바이스/NIC/스토리지 경로를 점검하고 IRQ affinity를 조정합니다.                                                                                                                     |
| Entropy                             | `node_entropy_available_bits{instance="$node",job="$job"}`<br>`node_entropy_pool_size_bits{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 커널 난수(엔트로피) 가용/풀 크기입니다.                                                                                                                                                                                                                                      | 가용 엔트로피 부족 시 TLS/키 생성 지연이 발생할 수 있어 hwrng/irq 기반 엔트로피 소스를 활성화합니다.                                                                                                        |
| Hardware Temperature Monitor        | `node_hwmon_temp_celsius{instance="$node",job="$job"} * on(chip) group_left(chip_name) node_hwmon_chip_names{instance="$node",job="$job"}`<br>`node_hwmon_temp_crit_alarm_celsius{instance="$node",job="$job"} * on(chip) group_left(chip_name) node_hwmon_chip_names{instance="$node",job="$job"}`<br>`node_hwmon_temp_crit_celsius{instance="$node",job="$job"} * on(chip) group_left(chip_name) node_hwmon_chip_names{instance="$node",job="$job"}`<br>`node_hwmon_temp_crit_hyst_celsius{instance="$node",job="$job"} * on(chip) group_left(chip_name) node_hwmon_chip_names{instance="$node",job="$job"}`<br>`node_hwmon_temp_max_celsius{instance="$node",job="$job"} * on(chip) group_left(chip_name) node_hwmon_chip_names{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 센서별 온도/임계값/알람 상태입니다.                                                                                                                                                                                                                                          | 온도 임계 도달 시 팬/쿨링/스로틀링 동작을 점검하고, 먼지/에어플로우/히트싱크 접촉을 확인합니다.                                                                                                             |
| Cooling Device Utilization          | `100 * node_cooling_device_cur_state{instance="$node",job="$job"} / node_cooling_device_max_state{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 냉각 장치(팬/쿨러 등)의 현재 사용 비율(%)입니다.                                                                                                                                                                                                                             | 높은 상태가 지속되면 온도/전력 제한에 따른 성능 저하 가능성이 있어 냉각 성능을 점검합니다.                                                                                                                  |
| Power Supply                        | `node_power_supply_online{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 전원 장치 온라인 상태입니다.                                                                                                                                                                                                                                                 | 오프라인 이벤트 발생 시 UPS/전원 이중화 상태와 로그를 확인합니다.                                                                                                                                           |
| Hardware Fan Speed                  | `node_hwmon_fan_rpm{instance="$node",job="$job"} * on(chip) group_left(chip_name) node_hwmon_chip_names{instance="$node",job="$job"}`<br>`node_hwmon_fan_min_rpm{instance="$node",job="$job"} * on(chip) group_left(chip_name) node_hwmon_chip_names{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 팬 회전 속도와 최소 목표 속도입니다.                                                                                                                                                                                                                                         | 온도/쿨링 상태와 함께 팬 이상(정지/과속)을 조기에 감지합니다.                                                                                                                                               |
| Systemd Units State                 | `node_systemd_units{instance="$node",job="$job",state="activating"}`<br>`node_systemd_units{instance="$node",job="$job",state="active"}`<br>`node_systemd_units{instance="$node",job="$job",state="deactivating"}`<br>`node_systemd_units{instance="$node",job="$job",state="failed"}`<br>`node_systemd_units{instance="$node",job="$job",state="inactive"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | systemd 유닛 상태 분포입니다. failed/activating 장기 지속은 서비스 장애/기동 지연 신호입니다.                                                                                                                                                                                | 실패 유닛의 journal 로그를 확인하고 의존성/리소스/권한 문제를 해결합니다.                                                                                                                                   |
| Systemd Sockets Current             | `node_systemd_socket_current_connections{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | systemd 소켓 활성화의 현재 연결 수입니다.                                                                                                                                                                                                                                    | 급증 시 관련 서비스 소켓 유닛의 백로그/accept 설정을 점검합니다.                                                                                                                                            |
| Systemd Sockets Accepted            | `irate(node_systemd_socket_accepted_connections_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 초당 systemd 소켓이 수락한 연결 수입니다.                                                                                                                                                                                                                                    | 수락률 급증 시 서비스 프로세스 기동 지연/스로틀링으로 backlog overflow 위험이 있습니다.                                                                                                                     |
| Systemd Sockets Refused             | `irate(node_systemd_socket_refused_connections_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 수락 거부된 연결 비율입니다. backlog 초과/서비스 준비 미완료로 발생합니다.                                                                                                                                                                                                   | backlog 상향·서비스 프리워밍·수락 워커 수 조정 등으로 완화합니다.                                                                                                                                           |
| Disk Read/Write IOps                | `irate(node_disk_reads_completed_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_disk_writes_completed_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 초당 완료된 읽기/쓰기 IOPS입니다. 워크로드의 무작위/순차 특성과 부하 수준을 파악합니다.                                                                                                                                                                                      | IOPS가 높고 대기시간(Avg Wait/Queue)이 함께 상승하면 포화입니다. 스케줄러(blk-mq), 큐뎁스, writeback/배치 정책을 조정하고 워크로드 분산 또는 더 빠른 스토리지(SSD/NVMe)로 이전을 검토합니다.                |
| Disk Read/Write Data                | `irate(node_disk_read_bytes_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_disk_written_bytes_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 초당 읽기/쓰기 바이트(bps)로 스토리지 스루풋을 나타냅니다.                                                                                                                                                                                                                   | bps가 디바이스 한계에 근접하고 대기시간/큐가 상승하면 포화입니다. 파일시스템 옵션(noatime, barrier), readahead, RAID/스트라이프 크기, 동시성 조정을 검토하고 필요 시 스토리지 확장/업그레이드를 수행합니다. |
| Disk Average Wait Time              | `irate(node_disk_read_time_seconds_total{instance="$node",job="$job"}[$__rate_interval]) / irate(node_disk_reads_completed_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_disk_write_time_seconds_total{instance="$node",job="$job"}[$__rate_interval]) / irate(node_disk_writes_completed_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 요청당 평균 서비스 시간(초)입니다. 사용자 체감 지연과 직결됩니다.                                                                                                                                                                                                            | 평균/상위 백분위(p95+)가 평소 대비 상승하면 병목입니다. IOPS/큐/스케줄러와 교차 확인하고, fsync 빈도·랜덤 IO 패턴을 최적화하며 스토리지 레벨 증설·변경을 검토합니다.                                        |
| Average Queue Size                  | `irate(node_disk_io_time_weighted_seconds_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 가중 I/O 시간의 증가율로, 평균 큐 길이/동시 I/O 정도를 근사합니다.                                                                                                                                                                                                           | 높은 값이 지속되면 IOPS/대기시간·io_now와 함께 스토리지 포화를 의심합니다.                                                                                                                                  |
| Disk R/W Merged                     | `irate(node_disk_reads_merged_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_disk_writes_merged_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 블록 레이어가 인접 요청을 병합한 횟수입니다. 병합 비율로 요청 패턴/효율을 판단합니다.                                                                                                                                                                                        | 병합 증가가 지연·큐 길이 증가와 동반되면 요청 폭주 신호입니다. readahead/merge 정책, 파일 시스템 정렬과 배치 쓰기 전략을 점검합니다.                                                                        |
| Time Spent Doing I/Os               | `irate(node_disk_io_time_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_disk_discard_time_seconds_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_disk_flush_requests_time_seconds_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 디바이스가 I/O 작업에 소비한 가중 시간으로, 사실상 busy%를 나타냅니다.                                                                                                                                                                                                       | 1.0에 근접/지속 시 포화입니다. 쓰기 집약 작업의 시간대 분리, cgroup IO 제한, 스토리지 증설·교체(SSD/NVMe)와 스케줄러/큐뎁스 튜닝을 수행합니다.                                                              |
| Disk Ops Discards / Flush           | `irate(node_disk_discards_completed_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_disk_discards_merged_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_disk_flush_requests_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | TRIM/Discard와 Flush 요청 건수입니다. SSD 공간 회수와 데이터 일관성 동기화 활동을 보여줍니다.                                                                                                                                                                                | Discard가 거의 없으면 주기적 fstrim을 예약합니다. Flush 스파이크는 fsync 폭주 신호이므로 DB/로그 플러시 정책과 barrier 옵션을 점검하고, 필요 시 작업 시간대를 분리합니다.                                   |
| Disk Sectors Discarded Successfully | `irate(node_disk_discarded_sectors_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 성공적으로 폐기(Discard)된 섹터 수입니다. 대규모 삭제/공간 회수의 결과를 반영합니다.                                                                                                                                                                                         | 급증 시 대규모 삭제 작업으로 인한 성능 저하 가능성입니다. fstrim 스케줄을 야간으로 이동하고, SSD 펌웨어/마운트 옵션을 점검합니다.                                                                           |
| Instantaneous Queue Size            | `node_disk_io_now{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 현재 처리 중인 I/O 요청 수(큐 뎁스)입니다.                                                                                                                                                                                                                                   | 값이 높게 유지되면 스케줄러/큐뎁스 조정, 워크로드 분산, 캐싱 전략을 검토합니다.                                                                                                                             |
| File Descriptor                     | `node_filefd_maximum{instance="$node",job="$job"}`<br>`node_filefd_allocated{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 파일 디스크립터 최대치와 현재 할당 수입니다. FD 고갈 시 신규 연결/파일 오픈이 실패합니다.                                                                                                                                                                                    | 사용률이 높으면 ulimit/시스템 한도 상향과 FD 누수(핸들 미해제) 여부를 점검합니다.                                                                                                                           |
| File Nodes Free                     | `node_filesystem_files_free{instance="$node",job="$job",device!~'rootfs'}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 파일시스템의 남은 inode 수입니다. inode 고갈 시 작은 파일 생성도 실패합니다.                                                                                                                                                                                                 | 파일/디렉터리 폭주(로그/캐시) 원인을 정리하고, 필요 시 파티션 재구성 또는 스토리지 확장을 검토합니다.                                                                                                       |
| Filesystem in ReadOnly / Error      | `node_filesystem_readonly{instance="$node",job="$job",device!~'rootfs'}`<br>`node_filesystem_device_error{instance="$node",job="$job",device!~'rootfs',fstype!~'tmpfs'}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 파일시스템이 읽기 전용(RO)으로 전환됐거나 장치 오류가 발생한 상태입니다.                                                                                                                                                                                                     | 즉시 dmesg/S.M.A.R.T/RAID 상태 확인 및 장애 디바이스 교체·복구 절차를 진행합니다.                                                                                                                           |
| File Nodes Size                     | `node_filesystem_files{instance="$node",job="$job",device!~'rootfs'}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 파일시스템이 제공하는 전체 inode 수입니다.                                                                                                                                                                                                                                   | inode 사용률과 함께 inode 증설/파일 정리 필요성을 판단합니다.                                                                                                                                               |
| Network Traffic by Packets          | `rate(node_network_receive_packets_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_network_transmit_packets_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 초당 수신/송신 패킷 수(PPS)입니다. 작은 패킷 위주 트래픽은 CPU 부담을 키울 수 있습니다.                                                                                                                                                                                      | PPS와 bps를 함께 보고 패킷 폭주/작은 패킷 비중을 판단, IRQ/softnet 튜닝과 오프로딩 옵션을 검토합니다.                                                                                                       |
| Network Traffic Errors              | `rate(node_network_receive_errs_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_network_transmit_errs_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | NIC/링크/드라이버 계층에서의 수신/송신 오류율입니다. 정상적으로는 0에 가까워야 합니다.                                                                                                                                                                                       | 증가 시 MTU/체크섬/케이블/포트 오류, 드라이버 불안정 가능성을 점검하고, 호스트·스위치 로그를 확인합니다.                                                                                                    |
| Network Traffic Drop                | `rate(node_network_receive_drop_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_network_transmit_drop_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 커널/드라이버 계층에서 드롭된 패킷 비율입니다. 큐 포화·필터링·리소스 부족으로 발생합니다.                                                                                                                                                                                    | 증가 시 큐 길이, softnet times_squeezed, 방화벽/TC 설정, IRQ 바인딩과 RPS/XPS를 확인합니다.                                                                                                                 |
| Network Traffic Compressed          | `rate(node_network_receive_compressed_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_network_transmit_compressed_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 압축 프레임 수신/송신 비율입니다. 특정 드라이버/링크 구성에서만 의미가 있습니다.                                                                                                                                                                                             | 갑작스런 변동은 드라이버 설정/오프로딩 옵션 변경을 의심하고 릴리즈 노트/변경 이력을 확인합니다.                                                                                                             |
| Network Traffic Multicast           | `rate(node_network_receive_multicast_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 수신 멀티캐스트 패킷 비율입니다.                                                                                                                                                                                                                                             | 예상치 못한 증가 시 불필요한 멀티캐스트 가입/필터링 설정을 점검합니다.                                                                                                                                      |
| Network Traffic NoHandler           | `rate(node_network_receive_nohandler_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | NIC가 패킷을 받았지만 적절한 핸들러가 없어 드롭된 횟수입니다.                                                                                                                                                                                                                | 드라이버/프로토콜 바인딩, VLAN/브릿지 설정, 커널 모듈 로딩 상태를 점검합니다.                                                                                                                               |
| Network Traffic Frame               | `rate(node_network_receive_frame_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 프레임 오류(정렬/길이 등) 수신 횟수입니다.                                                                                                                                                                                                                                   | 케이블/포트/듀플렉스 불일치, MTU 문제를 점검합니다.                                                                                                                                                         |
| Network Traffic Fifo                | `rate(node_network_receive_fifo_total{instance="$node",job="$job"}[$__rate_interval])`<br>`rate(node_network_transmit_fifo_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | FIFO 오버런으로 인한 드롭 횟수입니다. NIC 버퍼 부족/IRQ 처리 지연에서 발생합니다.                                                                                                                                                                                            | RPS/XPS·IRQ 바인딩·ring buffer 크기·오프로딩 옵션을 점검합니다.                                                                                                                                             |
| Network Traffic Collision           | `rate(node_network_transmit_colls_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 이더넷 충돌 발생률(반이중 환경)입니다. 현대 스위치드 전이중 환경에서는 드뭅니다.                                                                                                                                                                                             | 발생 시 포트 설정(duplex/speed) 불일치·허브 구간을 점검합니다.                                                                                                                                              |
| Network Traffic Carrier Errors      | `rate(node_network_transmit_carrier_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 송신 캐리어 감지 오류입니다. 물리 계층 문제 신호입니다.                                                                                                                                                                                                                      | 케이블/커넥터/포트 불량, 트랜시버 문제를 점검하고 스위치 로그와 대조합니다.                                                                                                                                 |
| ARP Entries                         | `node_arp_entries{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | ARP 캐시 엔트리 수입니다.                                                                                                                                                                                                                                                    | 갑작스런 증가 시 스캔/브로드캐스트 폭주를 의심하고 보안/네트워크 장비 로그를 확인합니다.                                                                                                                    |
| NF Conntrack                        | `node_nf_conntrack_entries{instance="$node",job="$job"}`<br>`node_nf_conntrack_entries_limit{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | NAT/방화벽 커넥션 트래킹 테이블 사용량과 한도입니다.                                                                                                                                                                                                                         | 70~80% 상회 시 한도 상향/타임아웃 조정 및 트래픽 패턴(스캔/폭주) 점검이 필요합니다.                                                                                                                         |
| Network Operational Status          | `node_network_up{operstate="up",instance="$node",job="$job"}`<br>`node_network_carrier{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 인터페이스 운영 상태(up)와 물리 링크(carrier) 상태입니다.                                                                                                                                                                                                                    | down/carrier=0이면 케이블/포트/링크 설정 문제를 우선 점검합니다.                                                                                                                                            |
| Speed                               | `node_network_speed_bytes{instance="$node",job="$job"} * 8`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 인터페이스 링크 속도(bps)입니다.                                                                                                                                                                                                                                             | bps/PPS·Saturation 패널과 함께 포화 여부·최대 처리량을 판단합니다.                                                                                                                                          |
| MTU                                 | `node_network_mtu_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 최대 전송 단위 바이트(MTU)입니다.                                                                                                                                                                                                                                            | MTU 불일치 시 조각화/프레임 오류/드롭이 증가합니다. 경로 MTU와 일치하도록 조정합니다.                                                                                                                       |
| Sockstat TCP                        | `node_sockstat_TCP_alloc{instance="$node",job="$job"}`<br>`node_sockstat_TCP_inuse{instance="$node",job="$job"}`<br>`node_sockstat_TCP_orphan{instance="$node",job="$job"}`<br>`node_sockstat_TCP_tw{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | TCP 소켓 상태: alloc(할당), inuse(사용), orphan(고아), tw(TIME_WAIT) 수입니다.                                                                                                                                                                                               | orphan/tw 급증 시 종료 처리 지연·포트 고갈 위험입니다. 애플리케이션 close 처리, keepalive/timeout, 재사용 옵션, 포트 범위(ip_local_port_range)와 conntrack 한도를 점검합니다.                               |
| Sockstat UDP                        | `node_sockstat_UDPLITE_inuse{instance="$node",job="$job"}`<br>`node_sockstat_UDP_inuse{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | UDP 소켓 사용 수입니다.                                                                                                                                                                                                                                                      | inuse 급증과 Rcv/Snd 버퍼 에러 동반 시 버퍼 크기(rmem_max/wmem_max, 기본값)와 애플리케이션 처리 스레드 확장을 검토합니다.                                                                                   |
| Sockstat Used                       | `node_sockstat_sockets_used{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 전체 소켓 사용량(프로토콜 합계)입니다. 시스템 한도 대비 사용률을 파악합니다.                                                                                                                                                                                                 | fs.file-max, 프로세스/시스템 FD 한도와 somaxconn 대비 여유를 확인하고, 급증 시 FD/백로그 상향 및 리스너 수·로드밸런싱을 조정합니다.                                                                         |
| Sockstat FRAG / RAW                 | `node_sockstat_FRAG_inuse{instance="$node",job="$job"}`<br>`node_sockstat_RAW_inuse{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | IP 프래그먼트/RAW 소켓 사용 수입니다.                                                                                                                                                                                                                                        | FRAG 증가와 프레임 오류/MTU 불일치가 동반되면 경로 MTU 문제를 해결합니다. RAW 사용이 많으면 보안 정책·패킷 캡처 프로세스의 리소스 사용을 점검합니다.                                                        |
| Sockstat Memory Size                | `node_sockstat_TCP_mem_bytes{instance="$node",job="$job"}`<br>`node_sockstat_UDP_mem_bytes{instance="$node",job="$job"}`<br>`node_sockstat_FRAG_memory{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | TCP/UDP/FRAG 소켓이 사용하는 커널 버퍼 메모리 바이트입니다.                                                                                                                                                                                                                  | 메모리 압박·softnet 드롭과 동반 상승 시 버퍼 크기 튜닝, 패킷 크기 최적화(GSO/GRO), 애플리케이션 읽기 속도 개선을 진행합니다.                                                                                |
| Sockstat Average Socket Memory      | `node_sockstat_TCP_mem_bytes{instance="$node",job="$job"} / node_sockstat_TCP_inuse{instance="$node",job="$job"}`<br>`node_sockstat_UDP_mem_bytes{instance="$node",job="$job"} / node_sockstat_UDP_inuse{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 소켓 1개당 평균 커널 버퍼 사용량입니다.                                                                                                                                                                                                                                      | 평균이 비정상적으로 크면 메시지 단위가 크거나 누수 가능성입니다. 메시지 크기 제한·프레이밍·backpressure를 점검합니다.                                                                                       |
| TCP/UDP Kernel Buffer Memory Pages  | `node_sockstat_TCP_mem{instance="$node",job="$job"}`<br>`node_sockstat_UDP_mem{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | TCP/UDP 소켓 버퍼 메모리 페이지 수(커널 페이지 단위)입니다.                                                                                                                                                                                                                  | 페이지 수가 지속 증가하면 버퍼 릭 또는 장기 연결 폭주를 의심합니다. tcp_mem/udp_mem 튜닝과 연결 수 제한, keepalive/timeout을 조정합니다.                                                                    |
| Softnet Packets                     | `irate(node_softnet_processed_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_softnet_dropped_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 네트워크 스택의 패킷 처리량과 드롭률입니다. softnet 드롭은 커널 백로그 포화/처리 지연 신호입니다.                                                                                                                                                                            | 드롭 증가 시 times_squeezed·IRQ 바인딩·RPS/XPS·ring buffer·GRO/LRO·MTU 등을 점검합니다.                                                                                                                     |
| Softnet Out of Quota                | `irate(node_softnet_times_squeezed_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 커널 softnet 백로그 부족(큐 포화) 발생 횟수입니다. 패킷 드롭으로 이어질 수 있습니다.                                                                                                                                                                                         | 증가 시 RPS/XPS, 큐 길이, IRQ 바인딩, GRO/LRO, MTU, 드라이버 튜닝을 검토합니다.                                                                                                                             |
| Softnet RPS                         | `irate(node_softnet_received_rps_total{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_softnet_flow_limit_count_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | RPS 수신 처리량과 플로우 제한 이벤트 수입니다.                                                                                                                                                                                                                               | flow_limit_count 증가 시 RPS 플로우 제한에 걸린 상태입니다. RPS/XPS 마스크로 CPU 분산, netdev_max_backlog·NIC ring size 상향, IRQ 바인딩 최적화를 수행합니다.                                               |
| Netstat IP In / Out Octets          | `irate(node_netstat_IpExt_InOctets{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_IpExt_OutOctets{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | netstat 계층에서 본 초당 바이트(옥텟) 수신/송신량입니다.                                                                                                                                                                                                                     | NIC 레벨 bps와 함께 비교해 스택 상·하위 계층 간 불일치를 확인합니다.                                                                                                                                        |
| TCP In / Out                        | `irate(node_netstat_Tcp_InSegs{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Tcp_OutSegs{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 초당 TCP 세그먼트 수신/송신량입니다.                                                                                                                                                                                                                                         | 재전송/오류 패널과 함께 혼잡/패킷 손실 여부를 판단합니다.                                                                                                                                                   |
| UDP In / Out                        | `irate(node_netstat_Udp_InDatagrams{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Udp_OutDatagrams{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 초당 UDP 데이터그램 수신/송신량입니다.                                                                                                                                                                                                                                       | Rcv/Send 버퍼 에러, NoPorts와 함께 수신자 부재/버퍼 부족 이슈를 진단합니다.                                                                                                                                 |
| ICMP In / Out                       | `irate(node_netstat_Icmp_InMsgs{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Icmp_OutMsgs{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 초당 ICMP 메시지 수신/송신량입니다.                                                                                                                                                                                                                                          | 급증 시 네트워크 탐색/장애에 따른 Echo 요청 증가 또는 필터링 이슈를 점검합니다.                                                                                                                             |
| TCP Errors                          | `irate(node_netstat_TcpExt_ListenOverflows{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_TcpExt_ListenDrops{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_TcpExt_TCPSynRetrans{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Tcp_RetransSegs{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Tcp_InErrs{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Tcp_OutRsts{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_TcpExt_TCPRcvQDrop{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_TcpExt_TCPOFOQueue{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_TcpExt_TCPTimeouts{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 대기열 초과/드롭, SYN 재전송, 재전송, RST, 수신큐 드롭, OFO 큐, 타임아웃 등 TCP 오류 지표 묶음입니다.                                                                                                                                                                        | 급증 시 서버/네트워크 포화, 방화벽/보안장비, RTT 증가 등을 의심하고 Softnet/Errors와 교차 확인합니다.                                                                                                       |
| UDP Errors                          | `irate(node_netstat_Udp_InErrors{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Udp_NoPorts{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_UdpLite_InErrors{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Udp_RcvbufErrors{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Udp_SndbufErrors{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | UDP 오류 묶음입니다. NoPorts(대상 포트 미청취), Rcv/SndbufErrors(버퍼 부족), InErrors(기타 오류) 등입니다.                                                                                                                                                                   | 애플리케이션 포트 상태, 소켓 버퍼 크기, 방화벽/보안 장비 차단을 점검합니다.                                                                                                                                 |
| ICMP Errors                         | `irate(node_netstat_Icmp_InErrors{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 수신 ICMP 오류입니다. 도달 불가/시간 초과 등의 네트워크 이슈 신호일 수 있습니다.                                                                                                                                                                                             | 라우팅/방화벽/TTL 관련 설정을 점검하고, 대상 네트워크 경로를 트레이스합니다.                                                                                                                                |
| TCP SynCookie                       | `irate(node_netstat_TcpExt_SyncookiesFailed{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_TcpExt_SyncookiesRecv{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_TcpExt_SyncookiesSent{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | SYN 쿠키 활성화/수신/실패 수입니다. SYN flood 완화 동작을 보여줍니다.                                                                                                                                                                                                        | Sent/Recv 급증 시 DDoS 의심, 방화벽/보안 장비와 협조해 보호 정책을 점검합니다.                                                                                                                              |
| TCP Connections                     | `node_netstat_Tcp_CurrEstab{instance="$node",job="$job"}`<br>`node_netstat_Tcp_MaxConn{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 현재 ESTABLISHED 연결 수와 시스템 최대 연결 한도입니다.                                                                                                                                                                                                                      | 커넥션 급증 시 수용 한도/백로그 설정(net.core.somaxconn 등)과 리소스 한도를 점검합니다.                                                                                                                     |
| UDP Queue                           | `node_udp_queues{instance="$node",job="$job",ip="v4",queue="rx"}`<br>`node_udp_queues{instance="$node",job="$job",ip="v4",queue="tx"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | UDP 수신/송신 큐 길이입니다. 수신 큐 증가·드롭은 애플리케이션 처리 지연이나 버퍼 부족을 시사합니다.                                                                                                                                                                          | 소켓 버퍼 크기, 애플리케이션 처리 스레드, 패킷 폭주 시 레이트리밋 적용을 검토합니다.                                                                                                                        |
| TCP Direct Transition               | `irate(node_netstat_Tcp_ActiveOpens{instance="$node",job="$job"}[$__rate_interval])`<br>`irate(node_netstat_Tcp_PassiveOpens{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 초당 능동/수동 오픈 수입니다. 능동은 클라이언트 발신, 수동은 서버 수신입니다.                                                                                                                                                                                                | Active 급증은 아웃바운드 폭주, Passive 급증은 인바운드 폭주 신호입니다. 백로그/리스너 상태를 확인합니다.                                                                                                    |
| TCP Stat                            | `node_tcp_connection_states{state="established",instance="$node",job="$job"}`<br>`node_tcp_connection_states{state="fin_wait2",instance="$node",job="$job"}`<br>`node_tcp_connection_states{state="listen",instance="$node",job="$job"}`<br>`node_tcp_connection_states{state="time_wait",instance="$node",job="$job"}`<br>`node_tcp_connection_states{state="close_wait", instance="$node", job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | TCP 상태 분포입니다. TIME_WAIT/FIN_WAIT2/CLOSE_WAIT 증가는 종료 처리 지연·리소스 낭비 신호입니다.                                                                                                                                                                            | CLOSE_WAIT 증가 시 애플리케이션의 소켓 닫기 누락, TIME_WAIT 과다 시 커넥션 재사용/튜닝(TCP_TW_REUSE 등) 검토.                                                                                               |
| Node Exporter Scrape Time           | `node_scrape_collector_duration_seconds{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 각 콜렉터의 스크레이프 소요 시간(초)입니다. 특정 콜렉터 지연은 수집 실패·타임아웃 원인이 됩니다.                                                                                                                                                                             | 지연이 큰 콜렉터를 찾아 제외/간격 조정하거나 Exporter 리소스를 조정합니다.                                                                                                                                  |
| Exporter Process CPU Usage          | `irate(process_cpu_seconds_total{instance="$node",job="$job"}[$__rate_interval])`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Node Exporter 프로세스의 CPU 사용률입니다.                                                                                                                                                                                                                                   | 과도하면 수집 주기/활성 콜렉터를 조정하고, 다른 에이전트와 CPU 경쟁을 점검합니다.                                                                                                                           |
| Exporter Processes Memory           | `process_virtual_memory_bytes{instance="$node",job="$job"}`<br>`process_virtual_memory_max_bytes{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Node Exporter의 가상 메모리 사용량/최대치입니다.                                                                                                                                                                                                                             | 급증 시 콜렉터/텍스트파일 수집 항목을 점검하고, 버전/플러그인 이슈를 확인합니다.                                                                                                                            |
| Exporter File Descriptor Usage      | `process_max_fds{instance="$node",job="$job"}`<br>`process_open_fds{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Node Exporter 프로세스의 FD 한도/현재 사용 수입니다.                                                                                                                                                                                                                         | 스크레이프 타임아웃/파일 핸들 누수 여부를 점검하고 필요 시 한도를 상향합니다.                                                                                                                               |
| Node Exporter Scrape                | `node_scrape_collector_success{instance="$node",job="$job"}`<br>`1 - node_textfile_scrape_error{instance="$node",job="$job"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 콜렉터 성공 여부, 텍스트파일 수집 오류 여부입니다.                                                                                                                                                                                                                           | 특정 콜렉터 실패가 지속되면 제외/수정하고, 텍스트파일 포맷/권한을 점검합니다.                                                                                                                               |

## spring-boot-observability.json

| 패널                        | PromQL / 쿼리                                                                                                                                                                                                                                      | 의미                                                                                | 활용                                                                          |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- | ----------------------------------------------------------------------------- |
| Total Requests              | `sum(http_server_requests_seconds_count{application="$app_name", uri!~"/(api/)?actuator/prometheus"})`                                                                                                                                             | 전체 요청의 누적 건수(카운터 합)입니다.                                             | 트래픽 추세를 기반으로 대역폭·연결 안정성을 점검하고 부하 분산을 조정합니다.  |
| Requests Count              | `sum by(uri) (http_server_requests_seconds_count{application="$app_name", uri!~"/(api/)?actuator/prometheus"})`                                                                                                                                    | URI별 누적 요청 건수(카운터)입니다.                                                 | 트래픽 추세를 기반으로 대역폭·연결 안정성을 점검하고 부하 분산을 조정합니다.  |
| Requests Average Duration   | `sum by(uri)(http_server_requests_seconds_sum{application="$app_name"}) / sum by(uri)(http_server_requests_seconds_count{application="$app_name"})`                                                                                                | URI별 평균 응답 시간(초)입니다.                                                     | 지연이 평소보다 길어지면 병목 지점을 점검하고 스케일링이나 캐싱을 고려합니다. |
| Total Exceptions            | `sum(http_server_requests_seconds_count{application="$app_name", status=~"5.*", uri!~"/(api/)?actuator/prometheus"}) or vector(0)`                                                                                                                 | 5xx 응답의 누적 건수 합입니다.                                                      | 값이 0이 아니거나 급증하면 장애 원인을 조사하고 알람 임계치를 조정합니다.     |
| Percent of 2xx Requests     | `sum by(uri) (http_server_requests_seconds_count{application="$app_name", status=~"2.*", uri!~"/(api/)?actuator/prometheus"}) / sum by(uri) (http_server_requests_seconds_count{application="$app_name", uri!~"/(api/)?actuator/prometheus"})`     | URI별 2xx 응답 비율(정상 비중)입니다.                                               | 트래픽 추세를 기반으로 대역폭·연결 안정성을 점검하고 부하 분산을 조정합니다.  |
| Percent of 5xx Requests     | `1 - sum by(uri) (http_server_requests_seconds_count{application="$app_name", status!~"5.*", uri!~"/(api/)?actuator/prometheus"}) / sum by(uri) (http_server_requests_seconds_count{application="$app_name", uri!~"/(api/)?actuator/prometheus"})` | URI별 5xx 응답 비율(오류 비중)입니다.                                               | 값이 0이 아니거나 급증하면 장애 원인을 조사하고 알람 임계치를 조정합니다.     |
| PR 99 Requests Duration     | `histogram_quantile(.99,sum(rate(http_server_requests_seconds_bucket{application="$app_name", uri!~"/(api/)?actuator/prometheus"}[1m])) by(uri, le))`                                                                                              | URI별 지연 시간의 99퍼센타일(P99, 1분 윈도우)입니다.                                | 지연이 평소보다 길어지면 병목 지점을 점검하고 스케일링이나 캐싱을 고려합니다. |
| PR 95 Requests Duration     | `histogram_quantile(.95,sum(rate(http_server_requests_seconds_bucket{application="$app_name", uri!~"/(api/)?actuator/prometheus"}[1m])) by(uri, le))`                                                                                              | URI별 지연 시간의 95퍼센타일(P95, 1분 윈도우)입니다.                                | 지연이 평소보다 길어지면 병목 지점을 점검하고 스케일링이나 캐싱을 고려합니다. |
| Request Per Sec             | `sum by(uri)(rate(http_server_requests_seconds_count{application="$app_name"}[1m]))`                                                                                                                                                               | URI별 초당 요청 처리량(RPS)입니다.                                                  | 트래픽 추세를 기반으로 대역폭·연결 안정성을 점검하고 부하 분산을 조정합니다.  |
| Log Type Rate               | `sum by(type) (rate({compose_service=~"backend-.*"} &#124; pattern `<date> <time> <_>=<trace_id> <_>=<span*id> <*>=<trace*flags> <type> <*> --- <msg>` &#124; type != "" &#124;= "$log_keyword" [1m]))`                                            | 백엔드 로그의 타입(INFO/WARN/ERROR 등)별 초당 발생률(LogQL)                         | 로그 급증/감소로 이슈 구간을 식별하고 검색 키워드로 범위를 축소합니다.        |
| Log of All Spring Boot Apps | `{compose_service=~"backend-.*"} &#124; pattern `<date> <time> <_>=<trace_id> <_>=<span*id> <*>=<trace*flags> <type> <*> --- <msg>` &#124; line_format "{{.compose_service}}\t{{.type}}\ttrace_id={{.trace_id}}\t{{.msg}}" &#124;= "$log_keyword"` | 백엔드 서비스의 원시 로그 라인(LogQL)입니다. 트레이스/스팬 ID 등을 함께 표기합니다. | 장애 시점 로그를 빠르게 스캔하고 서비스·레벨·키워드로 필터링합니다.           |
